<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>KMIP</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="file-level-encryption.html" title="File-Level Encryption"></link><link rel="next" href="ssl-decryption.html" title="SSL Decryption"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=256425220"></script><script type="text/javascript">var propertyid = '256425220';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="real-time-protection.html"><span class="phrase">Real-time Protection</span></a></li><li class="breadcrumb-link"><a href="encryption.html">Encryption</a></li><li class="breadcrumb-node">KMIP</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="file-level-encryption.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="ssl-decryption.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-78902968-a529-a5b5-87e3-55e00c1ecaf3" data-permalink="kmip.html" data-topic-level="1" data-relative-prefix="" data-time-modified="July 28, 2020" data-publication-date="" id="UUID-ec952cca-1d16-f132-ab05-155486dbab94"><div class="titlepage"><div><div class="title"><h5 class="title">KMIP</h5></div></div></div><p>Netskope offers a complete cloud encryption solution that includes a full-fledged Key Management service based on FIPS 140-2 Level 3 certified HSMs.</p><p>Customers that want to leverage their existing Key Management infrastructure can use their KMIP-compliant HSMs to retain full control of the Keys.</p><p>Secure Forwarder is Netskope's versatile virtual appliance footprint will be used to establish a channel between the Netskope Cloud, where encryption will happen, and the on premises key managers. The security and reliability of this channel is paramount, as Netskope does not retain the keys that are indispensable for the encryption and decryption processes.</p><p></p><p>These sections describe the steps required to deploy Secure Forwarder and the associated configuration necessary to enable the Netskope On-Premises Key Management option.</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp197972"><div class="titlepage"><div><div class="title"><h6 class="title">Enabling On-Premises Key Management for the Netskope Cloud</h6></div></div></div><p>Netskope's encryption service uses the integrated key management service in the cloud by default. Transitioning to the On-Premises Key Management option is straightforward, but must be initiated via a <a class="link" href="mailto:support@netskope.com" target="_blank">Support</a> request if it was not done during initial onboarding.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp197976"><div class="titlepage"><div><div class="title"><h6 class="title">Installing the KMIP Forwarder Virtual Appliance</h6></div></div></div><p>In order to provide secure and resilient real-time access to the keys, KMIP forwarding should be enabled on a pair of Secure Forwarder virtual appliances. Although Secure Forwarder can be used for multiple deployment options and diverse functionality can be combined, for the purpose of this document it is assumed they are dedicated to KMIP forwarding.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp197979"><div class="titlepage"><div><div class="title"><h6 class="title">Prerequisites</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Download a VA package from <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; On-Premises Infrastructure</strong></span> to a local disk to start the onboarding process.</p></li><li class="listitem"><p>Before running the downloaded VA, make sure you have at least 8 CORES, 32GB of RAM and 196GB of disk space.</p></li><li class="listitem"><p>Downloading the VA zip file requires 7 GB of free space, plus you must unzip the file using 7zip. Using another tool creates a false error saying 789 PB of space is required.</p></li><li class="listitem"><p>KMIP forwarding requires the following ports to be opened.</p><div dir="ltr" class="note" id="UUID-ec952cca-1d16-f132-ab05-155486dbab94_DomainNameChange"><h3 class="title">Note</h3><p>In release 46 domain names changed. Existing deployments (release 45 and prior) do not require the new domain names, but using them are recommended. New deployments with release 46 and higher do need to use the new domain names.</p></div><p>For management connectivity:</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><colgroup><col></col></colgroup><thead><tr><th class="th" data-priority="1"><p>Domain</p></th><th class="th" data-priority="1"><p>Description</p></th><th class="th" data-priority="1"><p>Port</p></th></tr></thead><tbody><tr><td class="td"><p>New:<code class="literal">config-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code></p><p>Old: <code class="literal">config.goskope.com</code></p></td><td class="td"><p>Use for configuration updates. The domain needs to be SSL <span class="phrase">allowlisted</span> if you have SSL decryption enabled.</p></td><td class="td"><p>443</p></td></tr><tr><td class="td"><p>New: <code class="literal">messenger-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com </code></p><p>Old: <code class="literal">messenger.goskope.com </code></p></td><td class="td"><p>Use for reporting and status updates in the UI. The domain needs to be SSL <span class="phrase">allowlisted</span> if you have SSL decryption enabled.</p></td><td class="td"><p>443</p></td></tr><tr><td class="td"><p>New: <code class="literal">callhome-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com </code></p><p>Old: <code class="literal">callhome.goskope.com </code></p></td><td class="td"><p>Use for receiving metrics from on-premises appliances and forwarding them to cloud tenants, as well as receiving event data from an on-premises dataplane appliances. Also for receiving custom user attributes from user endpoints. The domain needs to be SSL <span class="phrase">allowlisted</span> if you have SSL decryption enabled.</p></td><td class="td"><p>443</p></td></tr></tbody></table></div><div dir="ltr" class="note" id="UUID-ec952cca-1d16-f132-ab05-155486dbab94_InternationalDeploymentDomains"><h3 class="title">Note</h3><p>For international deployments, use ~ <code class="literal">-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.eu.goskope.com</code> or ~ <code class="literal">-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.de.goskope.com</code>.</p></div><p>For KMIP over SSH tunnel connectivity:</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><colgroup><col></col></colgroup><thead><tr><th class="th" data-priority="1"><p>Domain Name</p></th><th class="th" data-priority="1"><p>Port</p></th></tr></thead><tbody><tr><td class="td"><p><code xml:lang="en" lang="en" dir="ltr" class="literal">remotesvc-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com </code></p><p>For deployments with release 45 or lower, use <code class="literal">remotesvc.goskope.com </code></p></td><td class="td"><p>22</p></td></tr></tbody></table></div></li></ul></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-3c1a02a3-647e-3e53-5fb8-20b822e5cf4c" data-time-modified="July 19, 2019" data-publication-date="" id="UUID-7ae3f9cc-eaf5-496b-c183-3bb7312540d0"><div class="titlepage"><div><div class="title"><h6 class="title">Install a Virtual Appliance</h6></div></div></div><p>Netskope's Virtual Appliance can be installed on VMware ESX 6.5 or later, Microsoft Hyper-V, Linux KVM, and AWS AMI.</p><p>Before you begin, decide whether the appliance will be setup as OPLP, Secure Forwarder, or a proxy server. Depending on the intended setup you can add one, two, or three network interfaces.</p><p>An OPLP or DPoP appliance will only require a single interface to connect to the Netskope cloud. For more information on setting up a Virtual Appliance as an OPLP, see <a class="xref" href="configure-the-interfaces.html" title="Configure the Interfaces"><span class="xreftitle">Configure the Interfaces</span></a>.</p><p>The following topics provide detailed instructions to install the VA on any of the supported platforms.</p><p><a xml:lang="en" lang="en" dir="ltr" class="xref" href="install-the-virtual-appliance-on-vmware-esx-6-5-or-later.html" title="Install the Virtual Appliance on VMware ESX 6.5 or later"><span class="xreftitle">Install the Virtual Appliance on VMware ESX 6.5 or later</span></a></p><p><a xml:lang="en" lang="en" dir="ltr" class="xref" href="install-the-virtual-appliance-on-microsoft-hyper-v.html" title="Install the Virtual Appliance on Microsoft Hyper-V"><span class="xreftitle">Install the Virtual Appliance on Microsoft Hyper-V</span></a></p><p><a class="xref" href="install-the-virtual-appliance-on-linux-kvm.html" title="Install the Virtual Appliance on Linux KVM"><span class="xreftitle">Install the Virtual Appliance on Linux KVM</span></a></p><p><a class="xref" href="provision-the-virtual-appliance-on-aws.html" title="Provision the Virtual Appliance on AWS"><span class="xreftitle">Provision the Virtual Appliance on AWS</span></a></p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-2bd52b8d-389f-d8ad-0b81-049d6f60a2cb" data-time-modified="July 25, 2020" data-publication-date="" id="UUID-b51c13c0-bd47-86ec-942c-21b269f6e726"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the KMIP Forwarder</h6></div></div></div><p>Now that the Virtual Appliance has been deployed, it's time to configure it:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the VM, open the console view.</p></li><li class="listitem"><p>Log into the VM using the credentials <code class="literal">nsadmin/nsappliance</code></p></li><li class="listitem"><p>When you first log in, the system shell opens.</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>To configure the Secure Forwarder as a KMIP Forwarder, you need to access the Netskope shell. Enter <code class="literal">nsshell</code> at the command prompt. The prompt changes to <code class="literal">sforwarder&gt;</code></p></li><li class="listitem"><p>At the <code class="literal">sforwarder&gt;</code> prompt, enter <code class="literal">configure</code> to go into the configuration mode.</p></li></ol></div></li></ol></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198105"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the Interface</h6></div></div></div><p>At this point you have a valid Secure Forwarder that has an identity. You now have to configure two aspects of this virtual appliance: interface configuration and DNS settings that steer cloud app traffic to your tenant instance in the Netskope cloud</p><p>In the sample network below, Secure Forwarder's client-facing interface, dp1, is connected to the 172.16.0.0/23 subnet. The interface configuration uses IP ranges within the subnet for accepting client traffic. The Secure Forwarder management plane (mp) interface will be assigned the IP 172.32.0.2 in the management subnet 172.32.0.0/24, and its egress interface, dp2, will be assigned the IP 10.100.1.2 in the subnet 10.100.1.0/24.</p><div class="informalfigure"><div class="mediaobject image-left" style="text-align:left;"><img src="image/uuid-77d6e802-2ebc-7345-6493-2537bda42e88-en.png" style="" alt="SecureForwarderIPs.png"></img></div></div><p>Issue the following commands to configure the IP addresses:</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You can also use the <code class="literal">show interface</code> command to verify the configuration.</p></div><pre class="programlisting">set interface mp ip 172.32 .0.2
set interface mp netmask 255.255.255.0
set interface mp gw 172.32.0.1
set interface dp1 ip 172.16.1.10-172.16 .1.60, 172.16.1.64, 172.16.1.65-172.16.1.125, 172.16.1.200-172.16.1.225
set interface dp1 netmask 255.255.254.0
set interface dp1 gw 172.16.0.1
set interface dp2 ip 10.100.1.2
set interface dp2 netmask 255.255.255.0
set interface dp2 gw 10.100.1.1</pre><p>Do note that the dp1 interface IP address can either be a full /24 block of IPs, or you can also assign non-contiguous IP addresses and/or IP address range. Example above shows the non-contiguous IP address and IP address range assigned for dp1.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198119"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the DNS Server</h6></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Configure the IP address the KMIP Forwarder uses to listen for DNS requests. This address is the first address specified for the dp1 interface IP. If an IP range was specified for dp1, use the first IP address in that range (in canonical order), or use dp1 's IP.</p><pre class="programlisting">set dataplane proxy-mode dns listener-ip 172.16.1.10</pre></li><li class="listitem"><p>Configure the address and/or address-range Secure Forwarder uses for DNS responses for cloud app domains. This address and/or address-range will be the same as that specified for the dp1 interface IP.</p><pre class="programlisting">set dataplane proxy-mode dns application-ips 172.16.1.10-172.16.1.60,172.16.1.64,172.16.1.65-172.16.1.125,172.16.1.200-172.16.1.225</pre></li><li class="listitem"><p>Configure Secure Forwarder's default client traffic listener IP. This address is the first address configured on the dp1 interface.</p><pre class="programlisting">set dataplane proxy-listener-ip 172.16.1.10
</pre></li><li class="listitem"><p>Enable DNS service on Secure Forwarder.</p><pre class="programlisting">set dataplane proxy-mode dns enable true</pre></li><li class="listitem"><p>Configure the primary upstream DNS Server in the network.</p><pre class="programlisting">set dns primary <span class="emphasis"><em>&lt;primary upstream dns server&gt;</em></span>
set dns secondary <span class="emphasis"><em>&lt;secondary upstream dns server&gt;</em></span></pre></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198139"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the Console</h6></div></div></div><p>The final step to connect this KMIP Forwarder on the network is to enter <code class="literal">Save</code> to activate the configuration.</p><p>Now try connecting to virtual appliance with an SSH client (like PuTTy for Windows). If successful, close the console by entering <code class="literal">exit</code> three times (one to exit configuration mode, one to exit the nsshell, and one to exit the Linux shell).</p><p>All further configuration should be performed over SSH.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198146"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the System</h6></div></div></div><p>First you need to install the tenant license key. You can get the license key from <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; On-Premises Infrastructure</strong></span> next to where you download the OVA package.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Copy the license key.</p></li><li class="listitem"><p>Install the license key with the command: <code class="literal">set system licensekey <span class="emphasis"><em>&lt;licensekey&gt;</em></span></code>.</p></li><li class="listitem"><p>Next, configure the system hostname. Set the hostname type with the command: <code class="literal">set system hostname <span class="emphasis"><em>&lt;hostname&gt;</em></span></code>.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198162"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the KMIP</h6></div></div></div><p>To complete the configuration, there are three KMIP specific settings that need to be configured. To do so, enter these commands:</p><pre class="programlisting">set kmip-server enable true
set kmip-server hostname &lt;key manager's hostname or IP address&gt;
set kmip-server port &lt;key manager's KMIP server port&gt;</pre></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198166"><div class="titlepage"><div><div class="title"><h6 class="title">Configure a Proxy</h6></div></div></div><p>The KMIP Forwarder requires a connection to port 443 on <code class="literal">config-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> and <code class="literal">messenger-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> for management connectivity. If an explicit proxy is deployed in the network, and the port 443 traffic needs to be routed via a proxy, configure the proxy hostname and port.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The domain names shown above and below apply to release 46 and higher. Using version 46 and later requires using the new domain names. For deployments on release 45 or lower, use <code class="literal">config.goskope.com</code> and <code class="literal">messenger.goskope.com</code>.</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>To configure a proxy, enter these commands at the configuration prompt:</p><pre class="programlisting">set management-plane upstream-proxy-server hostname <span class="emphasis"><em>&lt;hostname or IP-address&gt;</em></span>
set management-plane upstream-proxy-server port <span class="emphasis"><em>&lt;proxy-port-number&gt;</em></span></pre><p>If the proxy is configured to intercept SSL traffic, then you need to <span class="phrase">allowlist</span> the traffic to <code class="literal">config-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> and <code class="literal">messenger-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code>.</p><p>It is also important to note that KMIP Forwarder tunnels KMIP traffic using SSH, which requires direct connectivity to <code class="literal">remotesvc-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> on port 22 and can't be proxied at this time.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The domain name shown above applies to release 46 and higher. For deployments on release 45 or lower, use <code class="literal">remotesvc.goskope.com</code>.</p></div></li><li class="listitem"><p>To save the proxy configuration, enter <code class="literal">save</code> at the configuration prompt.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198198"><div class="titlepage"><div><div class="title"><h6 class="title">Verify the Connection</h6></div></div></div><p id="UUID-b51c13c0-bd47-86ec-942c-21b269f6e726_VerifyTheConnection">To verify KMIP Forwarder successfully connected to the Netskope cloud, go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; On-Premises Infrastructure</strong></span>. Scroll down the page until you see KMIP displayed beside your Serial Number. Last Seen shows the last time your KMIP Forwarder connected to the Netskope cloud.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>It takes few minutes to refresh the status in the UI.</p></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198205"><div class="titlepage"><div><div class="title"><h6 class="title">Finish the Configuration</h6></div></div></div><p>At this point the KMIP Forwarder virtual appliance is fully configured. All further configuration will be done in the Netskope tenant instance.</p><p>Make sure you save the configuration before leaving the nsshell and closing the ssh connection.</p><p>Enter <code class="literal">save</code> to activate the configuration, and then close the console by entering <code class="literal">exit</code> three times (one to exit configuration mode, one to exit the nsshell and one to exit the Linux shell).</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198212"><div class="titlepage"><div><div class="title"><h6 class="title">High Availability Considerations</h6></div></div></div><p>In order to ensure redundancy, two Virtual Appliances should be configured as KMIP Forwarders. Please note there is no special configuration required to enable HA. In case of the active Secure Forwarder service failure or network unavailability, another Secure Forwarder will take over and re-establish the connection with the Netskope Cloud and will relay any new incoming connection to the Key Manager. It is recommended to have at least two KMIP forwarders running on different infrastructure, different ESX hosts at a minimum and geographically dispersed if possible, to maximize resiliency.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198215"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the Tenant Instance</h6></div></div></div><p>The final steps required to enable the On Premises Key Management option should be performed using you tenant instance Web Interface, specifically on the On-Premises Infrastructure page. Go to the On-Premises Infrastructure page by following these steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to your Netskope tenant.</p></li><li class="listitem"><p>Go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; On-Premises Infrastructure</strong></span>.</p></li><li class="listitem"><p>Scroll down the page and look for your Name or Serial Number. Adjacent to that, if you see KMIP in the Configuration column, the KMIP Forwarder is connected in the Netskope tenant.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198227"><div class="titlepage"><div><div class="title"><h6 class="title">Install KMIP Certificates</h6></div></div></div><p>Finally, the KMIP client and CA certs required for the Netskope cloud to authenticate and validate the key manager must be uploaded. Go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; On-Premises Infrastructure</strong></span>, and under KMIP Forwarding:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Click <span class="bold bold"><strong>Upload</strong></span> to upload the KMIP Client certificate.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Upload</strong></span> to upload the KMIP Server CA certificate.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp198239"><div class="titlepage"><div><div class="title"><h6 class="title">Monitor the Status</h6></div></div></div><p>The On-Premises Infrastructure page also shows the current state of all the Secure Forwarder Virtual Appliances that have been configured as KMIP Forwarders in the Status column.</p></section></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-ec952cca-1d16-f132-ab05-155486dbab94">KMIP</a></li><li><a href="#idp197972">Enabling On-Premises Key Management for the Netskope Cloud</a></li><li><a href="#idp197976">Installing the KMIP Forwarder Virtual Appliance</a></li><li><a href="#idp197979">Prerequisites</a></li><li><a href="#UUID-7ae3f9cc-eaf5-496b-c183-3bb7312540d0">Install a Virtual Appliance</a></li><li><a href="#UUID-b51c13c0-bd47-86ec-942c-21b269f6e726">Configure the KMIP Forwarder</a><ul class="nav"><li><a href="#idp198105">Configure the Interface</a></li><li><a href="#idp198119">Configure the DNS Server</a></li><li><a href="#idp198139">Configure the Console</a></li><li><a href="#idp198146">Configure the System</a></li><li><a href="#idp198162">Configure the KMIP</a></li><li><a href="#idp198166">Configure a Proxy</a></li><li><a href="#idp198198">Verify the Connection</a></li><li><a href="#idp198205">Finish the Configuration</a></li><li><a href="#idp198212">High Availability Considerations</a></li><li><a href="#idp198215">Configure the Tenant Instance</a></li><li><a href="#idp198227">Install KMIP Certificates</a></li><li><a href="#idp198239">Monitor the Status</a></li></ul></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22KMIP%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22KMIP%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="file-level-encryption.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="ssl-decryption.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">July 28, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
