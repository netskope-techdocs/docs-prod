<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>O365 Auth Proxy</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="auth-integration.html" title="Auth Integration"></link><link rel="next" href="o365-auth-proxy.html#idm45980219168016" title="Configuration Best Practices"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript">var containerid = 'GTM-W56WJ8S';

						(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
						new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
						j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
						'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
						})(window,document,'script','dataLayer',containerid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="traffic-management.html">Traffic Management</a></li><li class="breadcrumb-link"><a href="proxies.html">Proxies</a></li><li class="breadcrumb-node">O365 Auth Proxy</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="auth-integration.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="o365-auth-proxy.html#idm45980219168016">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-f31b8c4b-012e-f269-8974-993e99ea73c8" data-permalink="o365-auth-proxy.html" data-topic-level="1" data-relative-prefix="" data-time-modified="February 13, 2021" data-publication-date="" id="UUID-3dd5a87f-8b5f-6a3a-0882-0f2481a72d12"><div class="titlepage"><div><div class="title"><h4 class="title">O365 Auth Proxy</h4></div></div></div><p>This document describes how to configure the Office 365 (O365) sign in authentication (auth) flow to go through your Auth/Federation server. The Auth Proxy will act as the pass-through proxy for all auth flows. Use this document if you are using an on-premises Auth/Federation server. The Auth Proxy enhances the O365 auth flow to ensure access to your enterprise instance of O365 is protected by Netskope <span class="phrase">Security Cloud Platform</span>.</p><p>O365 Auth Proxy intermediates the auth flow between enterprise users and your organization's on-premises Auth/Federation server. The Auth Proxy operates transparently. The user experience is unchanged, as the federation service itself is unchanged. The trust relationship between your organization's Auth/Federation server with O365 also remains intact.</p><p>The O365 Auth Proxy ensures that enterprise users from your organization are protected by Netskope <span class="phrase">Security Cloud Platform</span>. It redirects all user browser sessions, which are not within the Netskope Source IP Address Ranges (Netskope Client installed and enabled), to the Netskope reverse proxy. This ensures O365 access is managed. Exceptions can be made by an admin to allow certain source IP addresses and ranges to bypass the reverse proxy redirection. And for non-browser flows, app access is only allowed from managed devices.</p><p>If an O365 app is configured for idle-timeout, then the Netskope proxy can redirect the user session to IDP logout URL (configured by the admin) upon the idle timeout expiration. This will force the user to re-authenticate even if same user tries to log back into O365 after idle-timeout. Currently this functionality is available only for forward proxy.</p><p>To watch a video about Netskope Auth Proxy for O365 with Okta, click <span class="phrase">play</span>.</p><div class="mediaobject"><div class="video-container wistia"><div class="videoobject"><script async="" src="https://fast.wistia.com/embed/medias/xut33yo6wl.jsonp"></script><script async="" src="https://fast.wistia.net/assets/external/E-v1.js"></script><div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><div style="height:100%;width:100%" class="wistia_embed wistia_async_xut33yo6wl seo=false videoFoam=true"> </div></div></div></div></div></div><p>The following diagram illustrates a deployment scenario where Auth Proxy is in your DMZ and accessible from the Internet.</p><div class="informalfigure"><div class="mediaobject image-left" style="text-align:left;"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:540px;
                            "><tr style="height: 360px"><td style="padding:0;text-align:left;
                                        "><img src="image/uuid-d0d5263c-d37b-c214-a39d-b4a9c7d1f35c.png" style="max-width: 540px; max-height: 360px; " alt="AuthProxyDiagram.png" title="AuthProxyDiagram.png"></img></td></tr></table></div></div><p>O365 uses multiple auth flows, namely:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Passive Auth: Used by web-based apps, browsers, etc.</p></li><li class="listitem"><p>Active Auth: Used by native apps, like Outlook on Windows.</p></li><li class="listitem"><p>MEX Flow: Used by native apps, like OneDrive on Windows.</p></li></ul></div><p>The following table describes general configurations for possible auth flows:</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><colgroup><col></col><col></col><col></col><col></col></colgroup><thead><tr><th class="th" data-priority="1"><p>App Type</p></th><th class="th" data-priority="1"><p>Netskope Client Installed</p></th><th class="th" data-priority="1"><p>Netskope Client Uninstalled</p></th><th class="th" data-priority="1"><p>Auth Flow</p></th></tr></thead><tbody><tr><td class="td"><p>Native apps</p></td><td class="td"><p>Allow access as pass-through traffic</p></td><td class="td"><p>Block traffic (except for Outlook)</p></td><td class="td"><p>Active</p></td></tr><tr><td class="td"><p>Web-based apps</p></td><td class="td"><p>Allow access as pass-through traffic</p></td><td class="td"><p>Redirect to the Netskope reverse proxy</p></td><td class="td"><p>Passive</p></td></tr></tbody></table></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45980219168016"><div class="titlepage"><div><div class="title"><h5 class="title">Configuration Best Practices</h5></div></div></div><div class="informaltable table-responsive"><table class="informaltable table-bordered"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th" data-priority="1"><p>Best Practice</p></th><th class="th" data-priority="1"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p>Add your auth server domains as a custom app definition</p></td><td class="td"><p>This makes it easier to identify the app mapping and allows Netskope to track log in events. Define your custom app definition by going to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; App Definition</strong></span>.</p></td></tr><tr><td class="td"><p>Bypass + Tunnel setting for directing special app traffic</p></td><td class="td"><p>If you have the Netskope Client installed, but you still want to steer traffic from the endpoint to the Netskope Auth Proxy, select Bypass + Tunnel for Certificate-Pinned apps.</p><p>For example, if you configure Lync/Skype for Business, go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Steering Configuration</strong></span> and select that steering configuration. Click on <span class="bold bold"><strong>Exceptions</strong></span>, and then click <span class="bold bold"><strong>Add Exception &gt; Certificate-Pinned Apps</strong></span>. Click <span class="bold bold"><strong>Advanced Options</strong></span>, and then select the Bypass action + Tunnel mode for the appropriate platforms.</p><p>In addition, you should add the appropriate domains (like Lync.com, login.microsoftonline.com, aproxy.inskope.com, and so on).</p></td></tr></tbody></table></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-3dd5a87f-8b5f-6a3a-0882-0f2481a72d12">O365 Auth Proxy</a></li><li><a href="#idm45980219168016">Configuration Best Practices</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22O365%20Auth%20Proxy%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22O365%20Auth%20Proxy%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="auth-integration.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="o365-auth-proxy.html#idm45980219168016">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">February 13, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W56WJ8S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
