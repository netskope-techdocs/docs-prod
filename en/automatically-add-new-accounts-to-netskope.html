<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Automatically add new accounts to Netskope</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="migrate-existing-aws-accounts-to-the-new-set-up.html#UUID-ff88d934-8f56-2761-8744-ca46615deedd_section-idm4568085658176031741635417598" title="Manually migrate each account using aws-instance-setup.yml"></link><link rel="next" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452" title="Create the CFT file"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=256425220"></script><script type="text/javascript">var propertyid = '256425220';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="netskope-public-cloud-security.html"><span class="phrase">Netskope Public Cloud Security</span></a></li><li class="breadcrumb-link"><a href="continuous-security-assessment-for-amazon-web-services.html">Continuous Security Assessment for Amazon Web Services</a></li><li class="breadcrumb-link"><a href="setting-up-multiple-aws-accounts-using-the-new-ui.html">Setting Up Multiple AWS Accounts using the New UI</a></li><li class="breadcrumb-node">Automatically add new accounts to Netskope</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="migrate-existing-aws-accounts-to-the-new-set-up.html#UUID-ff88d934-8f56-2761-8744-ca46615deedd_section-idm4568085658176031741635417598">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-8eb98797-ef86-9008-089a-16884f2dc177" data-permalink="automatically-add-new-accounts-to-netskope.html" data-topic-level="1" data-relative-prefix="" data-time-modified="February 12, 2021" data-publication-date="" id="UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237"><div class="titlepage"><div><div class="title"><h6 class="title">Automatically add new accounts to Netskope</h6></div></div></div><p>This feature enables you to add new AWS accounts to the Netskope tenant using the AWS Management Console. The setup requires a CFT, <code class="literal">add_accounts_cft.yml</code> which calls Netskope's REST API to create an instance of the AWS account in the tenant. The CFT can be used along with an existing AWS script in your environment such as automatic AWS account creation and resource provisioning to provide you the benefit of automatically setting up your new AWS accounts in the Netskope tenant.</p><p>The CFT contains a script that calls the following REST APIs to create and manage AWS accounts in the Netskope tenant.</p><pre class="programlisting">https://&lt;tenant-name&gt;.goskope.com/api/v1/public_cloud/account?token=&lt;token&gt;&amp;op=create
https://&lt;tenant-name&gt;.goskope.com/api/v1/public_cloud/account?token=&lt;token&gt;&amp;op=update
https://&lt;tenant-name&gt;.goskope.com/api/v1/public_cloud/account?token=&lt;token&gt;&amp;op=delete</pre><div dir="ltr" class="note"><h3 class="title">Note</h3><p>For more information on REST API endpoints see, <a class="xref" href="public-cloud-api-endpoints.html" title="Public Cloud API Endpoints"><span class="xreftitle">Public Cloud API Endpoints</span></a>.</p></div><p>This setup requires you to perform the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a class="xref" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452" title="Create the CFT file"><span class="xreftitle">Create the CFT file</span></a></p></li><li class="listitem"><p><a class="xref" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4666905054798431739621554144" title="Import the CFT to AWS Management Console"><span class="xreftitle">Import the CFT to AWS Management Console</span></a></p></li></ol></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452"><div class="titlepage"><div><div class="title"><h6 class="title">Create the CFT file</h6></div></div></div><p>Create a file called <code class="literal">add_accounts_cft.yml</code> and copy the following contents into the file.</p><pre class="programlisting">Description: CrossAccountRole creation Template
Parameters:
  APIToken:
    Type: String
    Description: Enter REST API token for the tenant
  TenantUrl:
    Type: String
    Description: Enter the tenant url
  AccountName:
    Type: String
    Description: AWS account alias(if present) else human readable name
  AdminEmail:
    Type: String
    Description: Enter admin email
  SecurityScan:
    Type: String
    Default: 'true'
    Description: 'Enter ( "true", "false" ), whether security scan is enabled.'
    AllowedValues:
      - true
      - false
  DLPScan:
    Type: String
    Default: 'true'
    Description: 'Enter ( "true", "false" ), whether DLP Scan is enabled.'
    AllowedValues:
      - true
      - false
  MalwareScan:
    Type: String
    Default: 'false'
    Description: 'Enter ( "true", "false" ), whether Malware Scan is enabled'
    AllowedValues:
      - true
      - false
  SecurityScanInterval:
    Type: String
    Default: '60'
    Description: Select security scan interval
    AllowedValues:
      - '30'
      - '60'
      - '120'
      - '360'
      - '1440'
  TrustedAccountID:
    Type: String
    Description: Enter the account ID provided by Netskope.
  ExternalID:
    Type: String
    Description: Enter the external ID provided by Netskope.
Conditions:
  StorageScanEnabled: !Or
    - !Equals 
      - 'true'
      - Ref: DLPScan
    - !Equals
      - 'true'
      - Ref: MalwareScan
  SecurityScanEnabled: !Equals 
    - 'true'
    - Ref: SecurityScan
  AnyFeatureEnabled: !Or 
    - !Equals 
      - 'true'
      - !Ref DLPScan
    - !Equals 
      - 'true'
      - !Ref SecurityScan
Outputs:
  CrossRoleAccountRoleARN:
    Description: The cross-account role that Netskope will use.
    Value: !GetAtt 
      - CrossAccountRole
      - Arn
Resources:
  AutoAddInstance:
    Condition: AnyFeatureEnabled
    Properties:
      ServiceToken: !GetAtt 
        - AutoAddInstanceCall
        - Arn
      adminemail: !Ref AdminEmail
      accountname: !Ref AccountName
      apitoken: !Ref APIToken
      securityscan: !Ref SecurityScan
      introspection: !Ref DLPScan
      malware: !Ref MalwareScan
      securityscaninterval: !Ref SecurityScanInterval
      tenanturl: !Ref TenantUrl
      sspolicy:
        Fn::If:
        - StorageScanEnabled
        - Ref: StorageScanPolicy
        - Ref: AWS::NoValue
      cfpolicy:
        Fn::If:
        - StorageScanEnabled
        - Ref: CloudFormationPolicy
        - Ref: AWS::NoValue
      scpolicy:
        Fn::If:
        - SecurityScanEnabled
        - Ref: SecurityScanRolePolicy
        - Ref: AWS::NoValue
    Type: 'Custom::AutoAddInstance'
  AutoAddInstanceCall:
    Condition: AnyFeatureEnabled
    Properties:
      Code:
        ZipFile: |
          import boto3
          import json
          import time
          import ssl
          from urllib.request import Request, urlopen
          def send(event, context, responseStatus, responseData,
          physicalResourceId=None, noEcho=False):
              responseUrl = event['ResponseURL']
              responseBody = {}
              responseBody['Status'] = responseStatus
              responseBody['Reason'] = 'See the details in CloudWatch Log Stream: ' + context.log_stream_name
              responseBody['PhysicalResourceId'] = physicalResourceId or context.log_stream_name
              responseBody['StackId'] = event['StackId']
              responseBody['RequestId'] = event['RequestId']
              responseBody['LogicalResourceId'] = event['LogicalResourceId']
              responseBody['NoEcho'] = noEcho
              responseBody['Data'] = responseData
              json_responseBody = json.dumps(responseBody)
              try:
                  req = Request(responseUrl, method='PUT')
                  req.add_header('Content-Type', 'application/json; charset=utf-8')
                  jsondataasbyte = json_responseBody.encode("utf-8")
                  req.add_header('Content-Length', len(jsondataasbyte))
                  response = urlopen(req, jsondataasbyte)
              except Exception as e:
                  print("send(..) failed executing requests.put(..): " + str(e))
          def handler(event, context):
              properties = event.get('ResourceProperties', {})
              tenant_url = properties['tenanturl']
              api_token = properties['apitoken']
              account_id = properties["ServiceToken"].split(':')[4]
              instance_name = properties['accountname']
              time.sleep(30)
              request_body = {
                  "app": "aws",
                  "instance_name": instance_name,
              }
              request_url = "https://{}/api/v1/public_cloud/account?token={}&amp;op={}".format(tenant_url, api_token, '{}')
              if event['RequestType'] == 'Delete':
                  request_url = request_url.format('delete')
              else:
                  services = []
                  if properties["introspection"] == "true":
                    services.append("introspection")
                  if properties["securityscan"] == "true":
                    services.append("securityscan")
                  if properties["malware"] == "true":
                    services.append("malware")
                  request_body["use_for"] = services
                  admin_email = properties["adminemail"]
                  if 'securityscan' in services:
                      request_body["securityscan_interval"] = properties['securityscaninterval']
                  if 'Create' == event['RequestType']:
                      request_url = request_url.format('create')
                      request_body['accounts'] = [{
                          'account_id': account_id,
                          'account_name': instance_name,
                          'admin_email': admin_email
                      }]
                  elif event['RequestType'] == 'Update':
                      request_body["admin_email"] = admin_email
                      request_url = request_url.format('update')
              request_body = json.dumps(request_body)
              count = 3
              while count:
                  try:
                      print(request_url)
                      req = Request(request_url)
                      req.add_header('Content-Type', 'application/json; charset=utf-8')
                      jsondataasbyte = request_body.encode("utf-8")
                      req.add_header('Content-Length', len(jsondataasbyte))
                      response = urlopen(req, jsondataasbyte, context=ssl._create_unverified_context(), timeout=30)
                      resp = {"data": response.read().decode("utf-8")}
                      print("RESPONSE: {}".format(resp))
                      if "status" in resp["data"]:
                         json_resp  = json.loads(resp["data"])
                         status = json_resp.get("status")
                         if status != "success":
                            send(event, context, "FAILED", resp, 'autoaddaccounts')
                            break
                      print("wait for 2 mins")
                      time.sleep(120)
                      send(event, context, "SUCCESS", resp, 'autoaddaccounts')
                      break
                  except Exception as exc:
                      print("Response exc : {}".format(str(exc)))
                      if count &gt; 0:
                         count -= 1
                      if count == 0:
                         send(event, context, "FAILED", str(exc), 'autoaddaccounts')
      FunctionName: AutoAddInstanceCall
      Handler: index.handler
      Role: !GetAtt 
        - NSLambdaAccessRole
        - Arn
      Runtime: python3.7
      Timeout: 240
    Type: 'AWS::Lambda::Function'
  CloudFormationPolicy:
    Condition: StorageScanEnabled
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - 'cloudformation:CreateStack'
              - 'cloudformation:UpdateStack'
              - 'cloudformation:DeleteStack'
            Condition:
              'ForAllValues:Null':
                'cloudformation:RoleArn': true
            Effect: Allow
            Resource:
              - '*'
          - Action:
              - 'cloudformation:DescribeStacks'
              - 'sns:Publish'
              - 'sns:Subscribe'
              - 'sns:SetTopicAttributes'
              - 'sns:CreateTopic'
              - 'sns:DeleteTopic'
              - 'sns:ListTopics'
              - 'sns:GetTopicAttributes'
              - 'events:DescribeRule'
              - 'events:ListRules'
              - 'events:PutEvents'
              - 'events:EnableRule'
              - 'events:PutRule'
              - 'events:PutTargets'
              - 'events:RemoveTargets'
              - 'events:DeleteRule'
            Effect: Allow
            Resource:
              - 'arn:aws:cloudformation:*:*:stack/NetskopeStack/*'
              - 'arn:aws:sns:*:*:*'
              - 'arn:aws:events:*:*:rule/NetskopeStack*'
        Version: 2012-10-17
      PolicyName: CloudFormationPolicy
      Roles:
        - !Ref CrossAccountRole
    Type: 'AWS::IAM::Policy'
  CrossAccountRole:
    Condition: AnyFeatureEnabled
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Condition:
              StringEquals:
                'sts:ExternalId': !Ref ExternalID
            Effect: Allow
            Principal:
              AWS: !Join 
                - ''
                - - 'arn:aws:iam::'
                  - !Ref TrustedAccountID
                  - ':root'
            Sid: ''
        Version: 2012-10-17
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/SecurityAudit'
      Path: /
      RoleName: Netskope_Role
    Type: 'AWS::IAM::Role'
  NSLambdaAccessRole:
    Condition: AnyFeatureEnabled
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
        Version: 2012-10-17
      Path: /
      Policies:
        - PolicyDocument:
            Statement:
              - Action:
                  - 'logs:*'
                Effect: Allow
                Resource:
                  - 'arn:aws:logs:*:*:*'
            Version: 2012-10-17
          PolicyName: LogAccess
    Type: 'AWS::IAM::Role'
  SecurityScanRolePolicy:
    Condition: SecurityScanEnabled
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - 's3:ListBucket'
              - 'ses:ListIdentityPolicies'
              - 's3:GetBucketAcl'
              - 's3:GetBucketLocation'
              - 's3:ListAllMyBuckets'
              - 'dynamodb:ListTagsOfResource'
              - 'sqs:ListDeadLetterSourceQueues'
              - 'sqs:GetQueueUrl'
              - 'sqs:GetQueueAttributes'
              - 'lambda:Get*'
              - 'lambda:List*'
            Effect: Allow
            Resource:
              - '*'
        Version: 2012-10-17
      PolicyName: netskope-csa
      Roles:
        - !Ref CrossAccountRole
    Type: 'AWS::IAM::Policy'
  StorageScanPolicy:
    Condition: StorageScanEnabled
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - 'sns:Subscribe'
              - 'sns:Unsubscribe'
              - 'sns:ConfirmSubscription'
              - 's3:ListAllMyBuckets'
              - 's3:ListBucket'
              - 's3:GetObject'
              - 's3:GetObjectAcl'
              - 's3:GetBucketLocation'
              - 'cloudtrail:DescribeTrails'
              - 'ec2:DescribeRegions'
              - 'iam:ListAccountAliases'
            Effect: Allow
            Resource:
              - '*'
        Version: 2012-10-17
      PolicyName: StorageScanPolicy
      Roles:
        - !Ref CrossAccountRole
    Type: 'AWS::IAM::Policy'</pre></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4666905054798431739621554144"><div class="titlepage"><div><div class="title"><h6 class="title">Import the CFT to AWS Management Console</h6></div></div></div><p>Import <code class="literal">add_accounts_cft.yml</code> to a new CloudFormation stack in each AWS account. To import the CFT,</p><div class="procedure" id="UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_procedure-idm4575661925019231717399568885"><ol class="procedure" type="1"><li class="step"><p>Log in to the AWS Management Console using the credentials of the AWS account you are setting up with Netskope for IaaS and navigate to <span class="bold bold"><strong>Services &gt; CloudFormation</strong></span>.</p></li><li class="step"><p>In the CloudFormation page, click <span class="bold bold"><strong>Create stack</strong></span>.</p></li><li class="step"><p>Select <span class="bold bold"><strong>Upload a template file</strong></span> and click <span class="bold bold"><strong>Choose file</strong></span> to upload the <code class="literal">add_accounts_cft.yml</code> . Click <span class="bold bold"><strong>Next</strong></span>.</p><div class="mediaobject"><img src="image/uuid-6c51ccae-1b7e-09d8-7b6d-864c05caaec4-en.png" style="" alt="auto-add-cft_aws1.png"></img></div></li><li class="step"><p>In the Specify stack details page, specify a <span class="bold bold"><strong>Stack name</strong></span>.</p><p>The stack name must:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Only contain alphanumeric characters and hyphens,</p></li><li class="listitem"><p>start with an alphabet, and</p></li><li class="listitem"><p>not be longer than 128 characters.</p></li></ul></div></li><li class="step"><p>Define the parameters in the template and click <span class="bold bold"><strong>Next</strong></span>. For information, see <a class="xref" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4554783205508831739625303302" title="Provide input parameters in the stack details page"><span class="xreftitle">Provide input parameters in the stack details page</span></a>.</p><div class="mediaobject"><img src="image/uuid-a9bc19b8-1fa2-c5c5-6819-4a6ce7216b30-en.png" style="" alt="auto-add-cft_aws2.png"></img></div></li><li class="step"><p>In the Configure stack options page, use the default configuration, and click <span class="bold bold"><strong>Next</strong></span>.</p></li><li class="step"><p>Review your stack details on the <span class="bold bold"><strong>Review</strong></span> page, click the acknowledgment and then click <span class="bold bold"><strong>Create stack</strong></span>.</p><p>When the creation process is complete, your stack will be displayed on the CloudFormation page and the AWS account will be setup in the Netskope tenant with the services specified in the <code class="literal">add_accounts_cft.yml</code>.</p></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4554783205508831739625303302"><div class="titlepage"><div><div class="title"><h6 class="title">Provide input parameters in the stack details page</h6></div></div></div><p>You must provide the following input parameters in the stack created using <code class="literal">add_accounts_cft.yml</code> to set up the AWS account with Netskope's Public Cloud Security features such a Continuous Security Assessment and Storage Scan.</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><thead><tr><th class="th" data-priority="1"><p>Parameter</p></th><th class="th" data-priority="1"><p>Value</p></th></tr></thead><tbody><tr><td class="td"><p>APIToken</p></td><td class="td"><p>Enter Netskope's REST API token.</p></td></tr><tr><td class="td"><p>AccountName</p></td><td class="td"><p>Enter an AWS account name, preferably the AWS account alias.</p></td></tr><tr><td class="td"><p>AdminEmail</p></td><td class="td"><p>This parameter is optional. Enter an admin email.</p></td></tr><tr><td class="td"><p>DLPScan</p></td><td class="td"><p>Set to <code class="literal">true</code> by default to enable DLP scans. To disable DLP scans, enter <code class="literal">false</code>.</p></td></tr><tr><td class="td"><p>ExternalID</p></td><td class="td"><p>Contact <a class="link" href="mailto:support@netskope.com" target="_blank">Netskope support</a> to get the External ID.</p></td></tr><tr><td class="td"><p>MalwareScan</p></td><td class="td"><p>Set to <code class="literal">true</code> by default to enable threat and malware scans. To disable threat and malware scans, enter <code class="literal">false</code>.</p></td></tr><tr><td class="td"><p>SecurityScan</p></td><td class="td"><p>Set to <code class="literal">true</code> by default to enable security assessment scans. To disable security assessment scans, enter <code class="literal">false</code>.</p></td></tr><tr><td class="td"><p>SecurityScanInterval</p></td><td class="td"><p>The default scan interval is set to 60 minutes. You can change the interval time in minutes to one of the following values.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>30</p></li><li class="listitem"><p>120</p></li><li class="listitem"><p>360</p></li><li class="listitem"><p>1440</p></li></ul></div></td></tr><tr><td class="td"><p>TenantUrl</p></td><td class="td"><p>Enter Netskope's tenant URL.</p></td></tr><tr><td class="td"><p>TrustedAccountID</p></td><td class="td"><p>Contact <a class="link" href="mailto:support@netskope.com" target="_blank">Netskope support</a> to get the Trusted Account ID.</p></td></tr></tbody></table></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237">Automatically add new accounts to Netskope</a></li><li><a href="#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452">Create the CFT file</a></li><li><a href="#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4666905054798431739621554144">Import the CFT to AWS Management Console</a></li><li><a href="#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4554783205508831739625303302">Provide input parameters in the stack details page</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Automatically%20add%20new%20accounts%20to%20Netskope%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Automatically%20add%20new%20accounts%20to%20Netskope%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="migrate-existing-aws-accounts-to-the-new-set-up.html#UUID-ff88d934-8f56-2761-8744-ca46615deedd_section-idm4568085658176031741635417598">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="automatically-add-new-accounts-to-netskope.html#UUID-bd1cdb04-1e79-2d2f-ef1f-7a426c7f3237_section-idm4646577699496031739621375452">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">February 12, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
