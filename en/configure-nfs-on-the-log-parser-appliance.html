<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure NFS on the Log Parser Appliance</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="exclude-specific-apps.html" title="Exclude Specific Apps"></link><link rel="next" href="configure-nfs-on-the-log-parser-appliance.html#idm45980198886160" title="Troubleshooting your NFS CLI Configuration"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript">var containerid = 'GTM-W56WJ8S';

						(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
						new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
						j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
						'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
						})(window,document,'script','dataLayer',containerid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="appliances.html">Appliances</a></li><li class="breadcrumb-link"><a href="on-premises-appliance.html">On-Premises Appliance</a></li><li class="breadcrumb-link"><a href="upload-logs-using-sftp.html">Upload Logs using SFTP</a></li><li class="breadcrumb-node">Configure NFS on the Log Parser Appliance</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="exclude-specific-apps.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-nfs-on-the-log-parser-appliance.html#idm45980198886160">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-f2aeffee-c488-3e16-4abf-06b5317dd3fd" data-permalink="configure-nfs-on-the-log-parser-appliance.html" data-topic-level="1" data-relative-prefix="" data-time-modified="January 5, 2018" data-publication-date="" id="UUID-1337cc8e-888a-02ab-a77d-7927e192d47a"><div class="titlepage"><div><div class="title"><h5 class="title">Configure NFS on the Log Parser Appliance</h5></div></div></div><p>A log parsing appliance can be configured to read logs from an NFS share. NFS configuration on the log parsing appliance must be performed using the CLI. You need to make sure NFS server is up, or otherwise the CLI configuration will not be activated. After you have an NFS node up and running, you can specify its IP address and the absolute path to the NFS share. </p><p>The NFS share should allow write access, as the log parsing appliance will need to create directories for specific log types. Logs need to be placed in the directory appropriate for that log type. After a log file has been queued for parsing, the original log file is deleted. Please ensure that you retain backups of the original log files, in case they are needed. </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Note the IP address of the interface you configured. In this example the Inbound interface of the log appliance has the IP address of <code class="literal">1.1.1.2</code>. </p></li><li class="listitem"><p>Go to your NFS server and use the chmod command to set the permissions on the NFS server. </p><pre class="programlisting">chmod 777 <span class="emphasis"><em>&lt;nfs-share path&gt;</em></span></pre></li><li class="listitem"><p>Add the following entry in <code class="literal">/etc/exports</code></p><pre class="programlisting">#format 
#<span class="emphasis"><em>&lt;nfs-share path&gt;</em></span><span class="emphasis"><em>&lt;inbound interface IP configured on the log appliance&gt;</em></span>

/home/nsadmin/nfs-share/logs 1.1.1.2(rw,sync,no_root_squash,no_subtree_check)</pre></li><li class="listitem"><p>Activate your new settings by entering this command: <code class="literal">%&gt; sudo exportfs -a</code></p></li><li class="listitem"><p>Go back to log appliance CLI and enter these commands to configure NFS: </p><pre class="programlisting">set log-upload nfs-server enable true
set log-upload nfs-server host <span class="emphasis"><em>&lt;IP address or name of your NFS server&gt;</em></span>
set log-upload nfs-server mount-options <span class="emphasis"><em>&lt;Comma separated list of NFS mount options&gt;</em></span>
set log-upload nfs-server remote-mountpoint <span class="emphasis"><em>&lt;Absolute path of the NFS shared directory&gt;</em></span>
set log-upload nfs-server subdirectory <span class="emphasis"><em>&lt;Absolute path of the subdirectory within the NFS shared directory&gt;</em></span>
save</pre></li><li class="listitem"><p>The configuration was successful if you see: </p><pre class="programlisting">NFS setup complete
Restarting all services
Restarting networking services
Restarting resolvconf
Restarting DNS proxy
Restarting log
Configuration saved</pre></li><li class="listitem"><p>You can always look at the configuration by entering the show command: <code class="literal">show nfs-server</code>. </p></li><li class="listitem"><p>Enter the <code class="literal">exit</code> command to leave the nsshell configure mode. </p></li><li class="listitem"><p>If more than one log parsing appliance will be used, steps 1-7 need to be repeated on each one. It's critical that each appliance be assigned its own NFS share because they were not designed to operate on the same NFS directory. </p></li></ol></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45980198886160"><div class="titlepage"><div><div class="title"><h6 class="title">Troubleshooting your NFS CLI Configuration</h6></div></div></div><p>If the configuration was unsuccessful for any reason, the following message might be displayed on the CLI prompt: </p><pre class="programlisting">log01(config)# set nfs-server ip-address 1.1.1.1
log01(config)# set nfs-server remote-dir /home/nfs-share/logs
log01(config)# set nfs-server enable true
log01(config)# save
Restarting resolvconf
Restarting lclw
Configuration saved

NFS Server/Mount is not available...Please check NFS server configuration...
If NFS server config looks ok then try saving the config again...</pre><div class="orderedlist"><p>If you see this: </p><ol class="orderedlist" type="1"><li class="listitem"><p>Make sure your NFS server is up and running with correct access permission set for the log box you are using. Here is the sample from /etc/exports on an NFS server that was used for testing. You may choose to use different settings based on your network requirements, as long as the share is writeable ('rw'). etc/exports from NFS server being used for testing: </p><pre class="programlisting">#format
#<span class="emphasis"><em>&lt;nfs-share path&gt;&lt;inbound interface IP configured on the log box&gt;</em></span>
/home/nsadmin/nfs-share/logs 1.1.1.2 (rw,sync,no_root_squash,no_subtree_check)</pre></li><li class="listitem"><p>Make sure you have configured the inbound interface on the log parsing appliance and you have specified the correct IP address for the NFS server, along with the absolute path of NFS share directory as specified in <code class="literal">/etc/exports</code> on your NFS server. </p></li><li class="listitem"><p>On the NFS server's command prompt, run the following command after editing <code class="literal">/etc/exports</code>: <code class="literal">&gt; sudo exportfs -a </code></p></li><li class="listitem"><p>Save the configuration in the nsshell for the log parsing appliance again. If everything is setup correctly, it should be working properly. </p></li></ol></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-1337cc8e-888a-02ab-a77d-7927e192d47a">Configure NFS on the Log Parser Appliance</a></li><li><a href="#idm45980198886160">Troubleshooting your NFS CLI Configuration</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20NFS%20on%20the%20Log%20Parser%20Appliance%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20NFS%20on%20the%20Log%20Parser%20Appliance%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="exclude-specific-apps.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-nfs-on-the-log-parser-appliance.html#idm45980198886160">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">January 5, 2018</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W56WJ8S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
