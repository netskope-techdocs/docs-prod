<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure Google Drive for API-enabled Protection</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="api-enabled-protection-api-connectors-117901.html" title="API-enabled Protection API Connectors"></link><link rel="next" href="configure-google-drive-for-api-enabled-protection.html#idm46096618157264" title="Install Netskope for Google Apps from Google Marketplace"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZT8KHXMB6T"></script><script type="text/javascript">var propertyid = 'G-ZT8KHXMB6T';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="api-enabled-protection.html"><span class="phrase">API-enabled Protection</span></a></li><li class="breadcrumb-link"><a href="api-enabled-protection-for-google-drive.html"><span class="phrase">API-enabled Protection</span> for Google Drive</a></li><li class="breadcrumb-link"><a href="configure-the-api-connector-for-google-drive.html">Configure the API Connector for Google Drive</a></li><li class="breadcrumb-node">Configure Google Drive for <span class="phrase">API-enabled Protection</span></li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="api-enabled-protection-api-connectors-117901.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-google-drive-for-api-enabled-protection.html#idm46096618157264">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-7e0ef3c1-aff3-4eb9-50ef-c66c1e21928c" data-permalink="configure-google-drive-for-api-enabled-protection.html" data-topic-level="1" data-relative-prefix="" data-time-modified="April 20, 2021" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4"><div class="titlepage"><div><div class="title"><h6 class="title">Configure Google Drive for <span class="phrase">API-enabled Protection</span></h6></div></div></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p><span class="phrase">API-enabled Protection</span> supports all editions of Google workspace i.e., basic, business, and enterprise. However, with basic edition, shared drives and Google Drive audit activities are not supported.</p></div><div dir="ltr" class="important"><h3 class="title">Important</h3><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>If a user views a file immediately after uploading, Netskope receives the view event notification only, not the upload notification from Google Drive. This is a known issue in Google Workspace basic/limited account. Since this is a basic/limited account, Netskope skips the view event notification. This issue is not observed in Google Workspace enterprise/unlimited account.</p></li><li class="listitem"><p id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_para-idm43234329614984">Netskope does not get any notification when an internal user edits a file owned by an external user. In a nutshell, externally owned files are not audited by Google. This is a known limitation in Google Drive.</p></li></ul></div></div><p>To configure Google Drive for <span class="phrase">API-enabled Protection</span>, you need to authorize Netskope as a web application client to access your Google Drive instance.</p><p>An authenticated user must authorize all requests to the Google Drive API. Google Drive uses the OAuth 2.0 protocol for authenticating a Google account and authorizing access to user data.</p><p>There are two parts to this procedure:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Install Netskope for Google Apps from Google Marketplace</p></li><li class="listitem"><p>Configure Google Drive instance in Netskope UI</p></li></ul></div><div dir="ltr" class="important"><h3 class="title">Important</h3><p>Before installing the Netskope app for Google Apps, ensure that the Google Drive is available across all organization units of your google account. To check, log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a> and then navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace</strong></span> and ensure that for <span class="bold bold"><strong>Drive and Docs</strong></span> service, the service status is set to <span class="bold bold"><strong>ON for everyone</strong></span>.</p></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm46096618157264"><div class="titlepage"><div><div class="title"><h6 class="title">Install Netskope for Google Apps from Google Marketplace</h6></div></div></div><p>The administrator should install the Netskope app for <span class="phrase">API-enabled Protection</span> with domain-wide delegation to allow access to all users in the organization.  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Access this URL: <a class="link" href="https://workspace.google.com/marketplace/app/netskope/1055677045599" target="_blank" rel="noopener"> https://workspace.google.com/marketplace/app/netskope/1055677045599</a>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Install</strong></span>.</p></li><li class="listitem"><p>Log in using the admin username and password.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Domain Install</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Domain wide install</strong></span> pop-up window, click <span class="bold bold"><strong>CONTINUE</strong></span>.</p></li><li class="listitem"><p>The following pop-up window is displayed. For the <span class="bold bold"><strong>Turn ON for</strong></span> drop-down menu, ensure that you select the primary domain. This ensures that the app is installed for the entire organization. Select the <span class="bold bold"><strong>Terms of Service</strong></span> check box. Click <span class="bold bold"><strong>Accept</strong></span>.</p><div class="mediaobject"><img src="image/uuid-08ba23f5-511d-c9b0-7b38-28cf379db640.png" style="" alt="Google_Netskope_App_ToS.png"></img></div></li></ol></div><p>On successful installation of the app, the <span class="bold bold"><strong>Netskope has been installed!</strong></span> message is displayed. The Netskope app installation is now complete.</p><p>Once the app is installed, ensure the following items:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Netskope app is turned on for the entire organization. Log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a>. In the home page, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace Marketplace apps</strong></span>. Look for the Netskope app and ensure that the <span class="bold bold"><strong>Distribution</strong></span> is set to <span class="bold bold"><strong>On for everyone</strong></span>.</p></li><li class="listitem"><p>The appropriate scopes are granted. You can check the scopes by logging into<a class="link" href="https://admin.google.com" target="_blank" rel="noopener"> admin.google.com</a> and on the home page, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace Marketplace apps</strong></span>. Look for the Netskope app and click it. The scopes are as follows:</p><div class="informaltable table-responsive"><table class="informaltable frame-box rules-all"><colgroup><col style="width:25%;"></col><col style="width:35%;"></col><col style="width:40%;"></col></colgroup><thead><tr><th class="th" data-priority="1"><p>Scope Name</p></th><th class="th" data-priority="1"><p>Scope URL</p></th><th class="th" data-priority="1"><p>Usage</p></th><th class="th" data-priority="1"><p>Netskope Use Case</p></th></tr></thead><tbody><tr><td class="td"><p>View customer related information</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.customer.readonly</p></td><td class="td"><p>View details (e.g., contact email, organization title etc) of customer</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View and manage the provisioning of domains for your customers</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.domain</p></td><td class="td"><p>Provision and delete domain aliases for your customers Provision and delete multi-domains (secondary domains) for your customers</p></td><td class="td"><p>Read all managed domains used in user listing, calculating exposure of the shared file.</p></td></tr><tr><td class="td"><p>View groups on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.group.readonly</p></td><td class="td"><p>View details (e.g., name, members) and metadata (e.g., login details) of groups on your domain</p></td><td class="td"><p>If Team Drive has a group, then get active internal member of the group for doing all the API calls.</p></td></tr><tr><td class="td"><p>View organization units on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.orgunit.readonly</p></td><td class="td"><p>View metadata (e.g., name and description) of organization units</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View and manage the provisioning of users on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.user</p></td><td class="td"><p>Provision and delete users on your domain View and modify details (e.g., name, address, and phone number) and metadata (e.g., login details) of users on your domain</p></td><td class="td"><p>List all users, get details of a user.</p></td></tr><tr><td class="td"><p>Manage data access permissions for users on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.user.security</p></td><td class="td"><p>View and manage data access permissions for users on your domain</p></td><td class="td"><p>Get details of third party apps and plugins installed by users (google app ecosystem).</p></td></tr><tr><td class="td"><p>View audit reports for your G Suite domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.reports.audit.readonly</p></td><td class="td"><p>View audit reports of admin and user activity in your G Suite domain (e.g., password change events and document view events)</p></td><td class="td"><p>Poll audit events of Google Drive, administrator, login, mobile, and calendar. Webhooks subscription for Google Drive events of enterprise Google Suite accounts.</p></td></tr><tr><td class="td"><p>See, edit, create, and delete all your Google Drive files</p></td><td class="td"><p>https://www.googleapis.com/auth/drive</p></td><td class="td"><p>This app wants permission to access everything in your Google Drive. It will be able to do the same things you can do, including see your files , upload and download your files, delete your files, see the names and emails of people you share files with, share and stop sharing your files with others, remove people from your files, organize your drive.</p></td><td class="td"><p>Get Google Drive events like Team Drive details, file metadata, download, file sharing details etc.</p></td></tr><tr><td class="td"><p>View and modify but not delete your email</p></td><td class="td"><p>https://www.googleapis.com/auth/gmail.modify</p></td><td class="td"><p>View and modify your mail in Gmail. May move mail to Spam/Trash but not instantly delete forever Create, update, and delete labels Compose and send new email View your settings (e.g., filters and labels)</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View your email messages and settings</p></td><td class="td"><p>https://www.googleapis.com/auth/gmail.readonly</p></td><td class="td"><p>View your email messages Search your email messages View your settings (e.g., filters and labels)</p></td><td class="td"><p>Read email metadata, email details etc.</p></td></tr><tr><td class="td"><p>View your email address</p></td><td class="td"><p>https://www.googleapis.com/auth/userinfo.email</p></td><td class="td"><p>View the email address associated with your account</p></td><td class="td"><p>Grant the instance for Gmail, Google Drive.</p></td></tr><tr><td class="td"><p>See your personal info, including any personal info you've made publicly available</p></td><td class="td"><p>https://www.googleapis.com/auth/userinfo.profile</p></td><td class="td"><p>This app wants permission to see your full name, see your profile picture, see your gender, see your preferred languages, and see any other information you have made publicly available.</p></td><td class="td"><p>Grant the instance for Gmail, Google Drive.</p></td></tr></tbody></table></div></li></ul></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927"><div class="titlepage"><div><div class="title"><h6 class="title">Create a Custom Admin Role for Netskope</h6></div></div></div><p>If you do not plan to use the Google super admin account, you can create a custom admin role and assign the role to a user to grant access to <span class="phrase">API-enabled Protection</span>.</p><p>You can grant privileges/scopes for the Netskope app either using the default Google super admin role or by creating a custom admin role exclusively for the Netskope app. This section describes the steps to create a custom admin role for Netskope.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a>.</p></li><li class="listitem"><p>Click the triple bar on the top-left corner of the home page and navigate to <span class="bold bold"><strong>Account &gt; Admin roles</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Create new role</strong></span>.</p></li><li class="listitem"><p>Enter a name and description for the role and click <span class="bold bold"><strong>CONTINUE</strong></span>.</p></li><li class="listitem"><p>Select privileges for the role:</p><div dir="ltr" class="important"><h3 class="title">Important</h3><p>Netskope does not recommend to remove the following privileges. Any removal may result in failure of API calls and policy processing.</p></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Admin Console Privileges:</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>Organizational Units &gt; Read, Update</p></li><li class="listitem"><p>Users &gt; Read, Update</p></li><li class="listitem"><p>Groups</p></li><li class="listitem"><p>Services &gt; Services Settings</p></li><li class="listitem"><p>Drive and Docs &gt; Settings</p></li><li class="listitem"><p>Security &gt; User Security Management, Security Settings</p></li><li class="listitem"><p>Reports</p></li></ol></div></li><li class="listitem"><p>Admin API Privileges:</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>Organizational Units &gt; Read, Update</p></li><li class="listitem"><p>Users &gt; Read, Update</p></li><li class="listitem"><p>Groups &gt; Read, Update</p></li><li class="listitem"><p>User Security Management</p></li><li class="listitem"><p>Domain Management</p></li></ol></div></li></ol></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>CONTINUE</strong></span>, and then click <span class="bold bold"><strong>CREATE ROLE</strong></span>.</p></li></ol></div><p>Once you have created the custom role, you can assign the role to a user. The user can then authorize Netskope to grant access to your Google Drive instance.</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm46212282731808"><div class="titlepage"><div><div class="title"><h6 class="title">Possible Permission Errors and Solutions</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span xml:lang="en" lang="en" dir="ltr" class="bold bold"><strong>Access to Google Workspace data via API is Restricted</strong></span></p><p>Symptom: Google Workspace does not allow file listing or other file operations via API.</p><p>Back end error message: <span class="emphasis"><em>HTTPError403 when requesting https://www.googleapis.com/drive/v2/files?alt=json returned "The domain policy has disabled third-party Drive apps"</em></span></p><p>Solution: Under <span class="bold bold"><strong>Admin Console</strong></span>, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace &gt; Drive and Docs &gt; Features and Applications</strong></span>, verify that the <span class="bold bold"><strong>Drive SDK</strong></span> option is set to <span class="bold bold"><strong>ON</strong></span>.</p></li><li class="listitem"><p><span xml:lang="en" lang="en" dir="ltr" class="bold bold"><strong>Unauthorized app or scopes for Netskope</strong></span></p><p>Back end error message: <span class="emphasis"><em>AccessTokenRefreshError: unauthorized_client: Client is unauthorized to retrieve access tokens using this method</em></span></p><p>Solution: Under <span class="bold bold"><strong>Admin Console</strong></span>, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace Marketplace apps</strong></span>, verify that the Netskope app has all the required scopes. In case any scope has the “Read-only” scope instead of “Read-write” scope, modify the scopes accordingly.</p></li><li class="listitem"><p><span class="bold bold"><strong>Invalid credentials</strong></span></p><p>Symptom: Google Workspace does not allow users to access Google Drive directly or via API.</p><p>Back end error message: <span class="emphasis"><em>HttpError 401 when requesting https://www.googleapis.com/drive/v2/files?alt=json returned "Invalid Credentials"</em></span></p><p>Solution: Under <span class="bold bold"><strong>Admin Console</strong></span>, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace &gt; Drive and Docs</strong></span>, ensure that the <span class="bold bold"><strong>Service Status</strong></span> is set to <span class="bold bold"><strong>ON for everyone</strong></span> for all and specific organization units.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You should enable the <span class="bold bold"><strong>Service Status</strong></span> for all organization units as well specific organization units where the groups/users reside.  If this option is not enabled for all and/or specific OUs, Netskope cannot access Google Drive activities for groups/users residing under these OUs.</p></div><p>Ensure that the user has an active Google Drive license.</p></li></ul></div></section></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm46096618113952"><div class="titlepage"><div><div class="title"><h6 class="title">Configure Google Drive Instance in Netskope UI</h6></div></div></div><p>To authorize Netskope to access your Google Drive instance:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to the Netskope tenant UI: <code class="literal">https://<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> and go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">API-enabled Protection</span> &gt; SaaS</strong></span> .</p></li><li class="listitem"><p>Select the <span class="bold bold"><strong>Google Drive</strong></span> icon, and then click <span class="bold bold"><strong>Setup Instance</strong></span>.</p><p>The <span class="bold bold"><strong>Setup Instance</strong></span> window opens.</p></li><li class="listitem"><p><span class="bold bold"><strong>Instance Name</strong></span>: Enter the top-level domain name of your Google organization. To know your top-level domain, log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a>. On the admin console, navigate to <span class="bold bold"><strong>Domains &gt; Manage domains</strong></span>. The <span class="bold bold"><strong>Primary Domain</strong></span> is the top-level domain.</p></li><li class="listitem"><p><span class="bold bold"><strong>Instance Type</strong></span>: Select the appropriate features from the following options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_listitem-idm43237837253866"><p><span class="phrase">API-enabled Protection</span>: Select this option to allow Netskope to scan through your SaaS app instance to list files, user, and other enterprise data.</p></li><li class="listitem" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_listitem-idm43237837492314"><p>Quarantine: Select this options to quarantine a file if a user uploads a document that has a DLP violation. This moves the file to a quarantine folder for you to review and take appropriate action (allow the file to be uploaded or block the file from being uploaded). For more information to set up quarantine, see <a class="xref" href="quarantine-profile.html" title="Quarantine Profile"><span class="xreftitle">Quarantine Profile</span></a>.</p></li><li class="listitem" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_listitem-idm43237837516918"><p>Legal Hold: Select this option if you would like to preserves all forms of relevant information when litigation is reasonably anticipated. You can choose to have a copy of the file saved for legal purpose if it matches policy criteria. For more information to set up legal hold, see <a class="xref" href="legal-hold-profile.html" title="Legal Hold Profile"><span class="xreftitle">Legal Hold Profile</span></a>.</p></li><li class="listitem" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_listitem-idm43237837538958"><p>Malware: Select this option to detect malware in files, emails, attachments, chat messages, posts etc. For more information to set up malware, see <a class="xref" href="configure-threat-protection-for-api-enabled-protection.html" title="Configure Threat Protection for API-enabled Protection"><span class="xreftitle">Configure Threat Protection for <span class="phrase"></span><span class="phrase">API-enabled Protection</span></span></a>.</p></li><li class="listitem" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_listitem-idm43237837564804"><p>Forensic: Select this option to apply a forensic profile that flags policy violations and then stores the file in a forensic folder. For more information to set up forensic, see <a class="xref" href="about-forensics.html" title="About Forensics"><span class="xreftitle">About Forensics</span></a>.</p></li></ul></div></li><li class="listitem"><p>In <span class="bold bold"><strong>Enter the email address of the admins for Google Data Transfer</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-google-drive-for-api-enabled-protection.html#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following APIs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Data Transfer API, required to transfer data from one user to another within a domain: https://www.googleapis.com/auth/admin.datatransfer</p></li></ul></div></li><li class="listitem"><p>In <span class="bold bold"><strong>Enter email address of the admins for Google Directory</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-google-drive-for-api-enabled-protection.html#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following APIs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Directory API, required to list users: https://www.googleapis.com/auth/admin.directory.user</p></li><li class="listitem"><p>The Security API, required to list third-party apps, like Google App Ecosystem: https://www.googleapis.com/auth/admin.directory.user.security</p></li><li class="listitem"><p>The Domain API, required to list all internal domains of an instance: https://www.googleapis.com/auth/admin.directory.domain</p></li></ul></div></li><li class="listitem"><p>In <span class="bold bold"><strong>Enter email address of the admins for Google Drive</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-google-drive-for-api-enabled-protection.html#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following APIs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Drive API, required to list files: https://www.googleapis.com/auth/drive</p></li></ul></div></li><li class="listitem"><p>In <span class="bold bold"><strong>Enter email address of the admins for Google Reports</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-google-drive-for-api-enabled-protection.html#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following APIs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Reports API, required for generating Audit SkopeIT events: https://www.googleapis.com/auth/admin.reports.audit.readonly</p></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If different email addresses are specified for each email address field, ensure that each email address has the appropriate privileges. To know more about the privileges, see <a class="xref" href="configure-google-drive-for-api-enabled-protection.html#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>.</p></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save </strong></span>, then click <span class="bold bold"><strong>Grant Access</strong></span> for the app instance you just created. You will be prompted to log in using a super admin or a user with custom role and password, and then click <span class="bold bold"><strong>Grant</strong></span>. When the configuration results page open, click <span class="bold bold"><strong> Close</strong></span> .</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If different email addresses are specified for each address field, only the Google Directory API email address can grant access.</p></div></li></ol></div><p>Refresh your browser and you will see a green check icon next instance name.</p><p>The list of users and files associated with your Google Drive domain appear once the connection is established between the Netskope API connector and the Google Drive API for your domain. Features such as File and User listings are not populated in real-time. They are populated at the configured time intervals. However, running policies on files and folders are populated in real time.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm232122367096804"><div class="titlepage"><div><div class="title"><h6 class="title">Change in Google Drive Forensic Folder</h6></div></div></div><p>Google has enforced the following folder limit in Google Drive:</p><p>Any single folder in Google Drive which is not in a shared drive can have a maximum of 500,000 items placed within it. This limit does not apply to the root folder of 'My Drive'.</p><p>For more information on folder limits, refer to <a class="link" href="https://support.google.com/a/answer/2490100#limits" target="_blank" rel="noopener">Folder limits in Google Drive</a>.</p><p>In order to integrate with this change, Netskope has introduced an automatic sharding of forensics folders, such that a new folder is created every day with the name format <span class="emphasis"><em>Netskope Forensic Folder - &lt;current date hash&gt;</em></span>. All subsequent forensics incidents will be stored under this folder with a new folder created every subsequent day.</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm232122376405005"><div class="titlepage"><div><div class="title"><h6 class="title">Frequently Asked Question</h6></div></div></div><div class="qandaset" id="idm46096618036368"><ul><li><a href="configure-google-drive-for-api-enabled-protection.html#idm46096618036240">1. What happens when this feature is released?</a></li><li><a href="configure-google-drive-for-api-enabled-protection.html#idm46096618031056">2. What happens to the older forensics and older forensics folder if the above is the case?</a></li><li><a href="configure-google-drive-for-api-enabled-protection.html#idm46096618029904">3. Does the customer need to take any explicit action to use this feature?</a></li></ul><table style="border: 0; width: 100%;"><colgroup><col style="text-align: left; width: 1%; "></col><col></col></colgroup><tbody><tr class="question" id="idm46096618036240"><td style="text-align: left; vertical-align: top; " id="idm46096618036112"><p><strong>1.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>What happens when this feature is released?</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "></td><td style="text-align: left; vertical-align: top; "><p>After release 80 deployment, there are two scenarios:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Existing <span class="emphasis"><em>Netskope Forensic Folder</em></span> has reached it’s child object limit - In this case, a new folder is created inside 'My Drive' with name <span class="emphasis"><em>Netskope Forensic Folder_1</em></span> and then each day a new folder is created inside this folder with name <span class="emphasis"><em>Netskope Forensic Folder - &lt;current date hash&gt;</em></span>. All the new forensics data will get uploaded in this new hash folder which is created each day.</p></li><li class="listitem"><p>Existing <span class="emphasis"><em>Netskope Forensic Folder</em></span> has not reached its child object limit - In this case, new folders with a hash in name are created each day inside the existing <span class="emphasis"><em>Netskope Forensic Folder</em></span> itself and all the new forensics will get uploaded to these new hash folders.</p></li></ol></div></td></tr><tr class="question" id="idm46096618031056"><td style="text-align: left; vertical-align: top; " id="idm46096618030928"><p><strong>2.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>What happens to the older forensics and older forensics folder if the above is the case?</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "></td><td style="text-align: left; vertical-align: top; "><p>There is no change to the existing older folders and forensics data and they continue to exist as it was present earlier.</p></td></tr><tr class="question" id="idm46096618029904"><td style="text-align: left; vertical-align: top; " id="idm46096618029776"><p><strong>3.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>Does the customer need to take any explicit action to use this feature?</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "></td><td style="text-align: left; vertical-align: top; "><p>Customer does not need to take any action.</p></td></tr></tbody></table></div></section></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm4595107097417631676438410455"><div class="titlepage"><div><div class="title"><h6 class="title">Change Ownership Behavior in Google Drive</h6></div></div></div><p>In Google Drive, when you change ownership of a folder, it changes the ownership of the selected folder only and does not include the files inside. For example, if you change the ownership of a folder from <span class="emphasis"><em>user A</em></span> to <span class="emphasis"><em>user B</em></span>:</p><div class="itemizedlist" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_itemizedlist-idm43196005433540"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the ownership of the folder changes to <span class="emphasis"><em>user B</em></span>.</p></li><li class="listitem"><p>the ownership of the contents of the folder i.e., files and folders does not change to <span class="emphasis"><em>user B</em></span>. It remains with <span class="emphasis"><em>user A</em></span>.</p></li></ul></div><p id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_para-idm43167644235254">This is how Google handles change in folder ownership.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm46096618028704"><div class="titlepage"><div><div class="title"><h6 class="title">Google Drive Connected Apps and Plugins</h6></div></div></div><p>Google App Ecosystem lists the apps that are installed in the domain using an OAuth 2.0 token. In previous releases, Netskope identified these apps and described them using a CCI score, scope used, and app type. From release 48 on wards, users can create policies to revoke apps based on specific criteria. This feature allows creation of policies on third-party apps displayed in Google App Ecosystem. Policies may be based on an app ID, scopes used, CCI score, and more. Users may also create a list of apps that may be included or excluded from a policy trigger. App revocation can be done for all or selected users who have installed the app.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-5c906d34f19eb-idm46719508718480"><div class="titlepage"><div><div class="title"><h6 class="title">Google Team/Shared Drive Support</h6></div></div></div><p>Netskope supports Google Team/Shared Drive. Google Team/Shared Drive is available for business and enterprise accounts only. The salient features are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Track content shared within team/shared drives and externally.</p></li><li class="listitem"><p>Scan files for sensitive content based on team/shared drive policies (including retroactive and ongoing policies).</p></li><li class="listitem"><p>Monitor activity in the organization's team/shared drives.</p></li><li class="listitem"><p>Support audit logs for team/shared drive events.</p></li></ul></div><p>You can configure a Google team/shared drive policy from the the <span class="bold bold"><strong>Policies &gt; <span class="phrase">API-enabled Protection</span></strong></span> page.</p><div dir="ltr" class="important"><h3 class="title">Important</h3><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>For Team/Shared Drive folders to populate on the policy wizard page of <span class="phrase">API-enabled Protection</span>, ensure that the Team/Shared Drive folders are in active state. To check, log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a> and then navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace &gt; Drive and Docs &gt; Manage shared drives</strong></span> and ensure that the Team/Shared Drive folders are in active state.</p></li><li class="listitem"><p>Ensure that one of the team/shared drives' member has a managers' role. This is required to scan and list Team Drive files, ongoing and retroactive <span class="phrase">API-enabled Protection</span> policy scans.</p></li><li class="listitem"><p>Ensure that the manager has an active Google Workspace Business or Enterprise license.</p></li></ul></div></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4">Configure Google Drive for API-enabled Protection</a></li><li><a href="#idm46096618157264">Install Netskope for Google Apps from Google Marketplace</a></li><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_N1521706448927">Create a Custom Admin Role for Netskope</a><ul class="nav"><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm46212282731808">Possible Permission Errors and Solutions</a></li></ul></li><li><a href="#idm46096618113952">Configure Google Drive Instance in Netskope UI</a></li><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm232122367096804">Change in Google Drive Forensic Folder</a><ul class="nav"><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm232122376405005">Frequently Asked Question</a></li></ul></li><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-idm4595107097417631676438410455">Change Ownership Behavior in Google Drive</a></li><li><a href="#idm46096618028704">Google Drive Connected Apps and Plugins</a></li><li><a href="#UUID-3ea77b46-19b1-9bc0-71ed-24725c2db5e4_section-5c906d34f19eb-idm46719508718480">Google Team/Shared Drive Support</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20Google%20Drive%20for%20API-enabled%20Protection%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20Google%20Drive%20for%20API-enabled%20Protection%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="api-enabled-protection-api-connectors-117901.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-google-drive-for-api-enabled-protection.html#idm46096618157264">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">April 20, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
