<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Step 2/2: Permissions</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="step-1-2--accounts---services.html" title="Step 1/2: Accounts &amp; Services"></link><link rel="next" href="scanning-s3-buckets-encrypted-with-kms-keys.html" title="Scanning S3 Buckets encrypted with KMS keys"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=2349419734"></script><script type="text/javascript">var propertyid = '2349419734';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="netskope-public-cloud-security.html"><span class="phrase">Netskope Public Cloud Security</span></a></li><li class="breadcrumb-link"><a href="continuous-security-assessment-for-amazon-web-services.html">Continuous Security Assessment for Amazon Web Services</a></li><li class="breadcrumb-link"><a href="setting-up-multiple-aws-accounts-using-the-new-ui.html">Setting Up Multiple AWS Accounts using the New UI</a></li><li class="breadcrumb-link"><a href="add-aws-accounts-to-netskope-using-the-netskope-ui.html">Add AWS accounts to Netskope using the Netskope UI</a></li><li class="breadcrumb-node">Step 2/2: Permissions</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="step-1-2--accounts---services.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="scanning-s3-buckets-encrypted-with-kms-keys.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-f5fff909-73ce-0d4e-11f0-e30c04f0b7a9" data-permalink="step-2-2--permissions.html" data-topic-level="1" data-relative-prefix="" data-time-modified="July 22, 2020" data-publication-date="" id="UUID-a2c824c8-ae71-c6a4-9f9c-00b8f6db4bb4"><div class="titlepage"><div><div class="title"><h6 class="title">Step 2/2: Permissions</h6></div></div></div><p>Netskope requires permissions to perform certain actions in the AWS account such as assuming a role to scan your AWS resources, or creating a stack to receive CloudWatch events. This screen provides a customized CFT with permissions required to set up cross account access between Netskope and your AWS accounts. The permissions are defined in the CFT and differ based on the services you've enabled in the previous step.</p><p>You can review the CFT to understand the various permissions required by Netskope.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Ensure that the AWS accounts have the permissions required to run the Netskope for IaaS services.</p></div><p>To complete the set up you must:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Download the CFT.</p></li><li class="listitem"><p>Upload the CFT to a new CloudFormation stack in each AWS account.</p></li><li class="listitem"><p>Confirm that a cross account role with the required permissions is created.</p></li></ol></div><p>Follow the detailed instructions below to complete the set up.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the Permissions screen of the New Setup window, click the link to download the CFT.</p><div class="mediaobject"><img src="image/uuid-8df09f29-add1-e84e-99e1-1932813c9c84-en.png" style="" alt="multi-accountAWSsetup-1.png"></img></div></li><li class="listitem"><p>Log in to the AWS Management Console using the credentials of the AWS account you are setting up with Netskope for IaaS and navigate to <span class="bold bold"><strong>Services &gt; CloudFormation</strong></span>.</p></li><li class="listitem"><p>In the CloudFormation page, click <span class="bold bold"><strong>Create stack</strong></span>.</p><div class="mediaobject"><img src="image/uuid-996c28bd-776e-5203-dc4d-a8b8f1a1435d-en.png" style="" alt="create_stack.png"></img></div><p>To create a stack with new resources, choose <span class="bold bold"><strong>With new resources (standard)</strong></span>.</p><p>To create a stack with existing resources, choose <span class="bold bold"><strong>With existing resources (import resources)</strong></span>.</p></li><li class="listitem"><p>Select <span class="bold bold"><strong>Upload a template file</strong></span> and click <span class="bold bold"><strong>Choose file</strong></span> to upload the <span class="bold bold"><strong>aws-instance-setup.yml</strong></span>. Click <span class="bold bold"><strong>Next</strong></span>.</p><div class="mediaobject"><img src="image/uuid-edfa6337-d364-09f2-7e0d-6c8b5232db45-en.png" style="" alt="multi-accountAWSsetup-2.png"></img></div></li><li class="listitem"><p>In the Specify stack details page, specify a <span class="bold bold"><strong>Stack name</strong></span>. Click <span class="bold bold"><strong>Next</strong></span>.</p><p>The stack name must:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Only contain alphanumeric characters and hyphens,</p></li><li class="listitem"><p>start with an alphabet, and</p></li><li class="listitem"><p>not be longer than 128 characters.</p></li></ul></div></li><li class="listitem"><p>In the Configure stack options page, use the default configuration and click <span class="bold bold"><strong>Next</strong></span>.</p></li><li class="listitem"><p>Review your stack details on the <span class="bold bold"><strong>Review</strong></span> page, click the acknowledgment and then click <span class="bold bold"><strong>Create stack</strong></span>.</p><p>When the creation process is complete, your stack will be displayed on the CloudFormation page.</p><p>You can click on the stack to view the details about the stack. The Resources tab displays the various components that are part of <span class="bold bold"><strong>aws-instance-setup.yml</strong></span>. The Template tab displays the permissions defined in the template.</p></li><li class="listitem"><p>In the Netskope UI, confirm that a cross account role with permissions is created in each AWS account. Click <span class="bold bold"><strong>Add Accounts</strong></span>.</p><div class="mediaobject"><img src="image/uuid-a323bdd5-7b65-2f51-e678-e113ae9bfd2d-en.png" style="" alt="multi-accountAWSsetup-3.png"></img></div><p>Netskope adds the AWS accounts to the <span class="bold bold"><strong>Settings &gt; API-enabled Protection &gt; Cloud Infrastructure</strong></span> page. The page also displays the services that are enabled for each account.</p><div class="mediaobject"><img src="image/uuid-dad696fa-aeee-ca26-ade9-6c9a2df6a2c3-en.png" style="" alt="multi-accountAWSsetup-4.png"></img></div></li></ol></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-a2c824c8-ae71-c6a4-9f9c-00b8f6db4bb4_section-idm4616737387249631610336552066"><div class="titlepage"><div><div class="title"><h6 class="title">What happens in the process?</h6></div></div></div><p>When DLP Scan or Threat Protection (Malware Scan) is enabled Netskope's <span class="bold bold"><strong>aws-instance-setup.yml</strong></span> creates a cross-account role in the AWS accounts which enables the CFT to create,</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>a new CloudFormation stack called <span class="bold bold"><strong>NetskopeStack</strong></span> in each region of this account where DLP Scan or Threat Protection (Malware Scan) is enabled.</p></li><li class="listitem"><p>CloudWatch event rules to monitor events in S3 buckets. Netskope creates and monitors the following rules,</p><p>RestoreObject, PutObject, PutObjectAcl, CopyObject, DeleteObject, CreateMultipartUpload, UploadPart, UploadPartCopy, CompleteMultipartUpload.</p></li><li class="listitem"><p>an SNS Topic, Policy, and Subscription to subscribe the AWS accounts to Netskope's endpoint URL. The endpoint is a notification receiver that receives CloudWatch events generated from write, update, and delete operations performed on S3 buckets in your AWS accounts.</p></li></ul></div><p>Netskope requires permissions to monitor and receive events from S3 buckets in your AWS accounts. The cross-account role creates two IAM policies, StorageScanPolicy and CloudFormationPolicy.</p><p>StorageScanPolicy is created with the following permissions,</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><thead><tr><th class="th" data-priority="1"><p>AWS Permissions for StorageScanPolicy</p></th><th class="th" data-priority="1"><p>Purpose</p></th></tr></thead><tbody><tr><td class="td"><p>s3:ListAllMyBuckets</p></td><td class="td"><p>This implementation of the GET operation returns a list of all buckets owned by the authenticated sender of the request.</p></td></tr><tr><td class="td"><p>s3:ListBucket</p></td><td class="td"><p>Lists a specific bucket</p></td></tr><tr><td class="td"><p>s3:GetObject</p></td><td class="td"><p>This implementation of the GET operation retrieves objects from Amazon S3.</p></td></tr><tr><td class="td"><p>s3:GetObjectAcl</p></td><td class="td"><p>This implementation of the GET operation uses the acl subresource to return the access control list (ACL) of an object.</p></td></tr><tr><td class="td"><p>s3:GetBucketLocation</p></td><td class="td"><p>This implementation of the GET operation uses the location subresource to return a bucket's region.</p></td></tr><tr><td class="td"><p>ec2:DescribeRegions</p></td><td class="td"><p>Describes one or more regions that are currently available to you.</p></td></tr></tbody></table></div><p>CloudFormationPolicy is created with the following permissions,</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><thead><tr><th class="th" data-priority="1"><p>AWS Permissions for CloudFormationPolicy</p></th><th class="th" data-priority="1"><p>Purpose</p></th></tr></thead><tbody><tr><td class="td"><p>cloudformation:DescribeStacks</p></td><td class="td"><p>Returns the description for the specified stack; if no stack name was specified, then it returns the description for all the stacks created.</p></td></tr><tr><td class="td"><p>sns:Publish</p></td><td class="td"><p>Sends a message to all endpoints a topic is subscribed to.</p></td></tr><tr><td class="td"><p>sns:Unsubscribe</p></td><td class="td"><p>Deletes a subscription.</p></td></tr><tr><td class="td"><p>sns:Subscribe</p></td><td class="td"><p>Prepares to subscribe an endpoint by sending the endpoint a confirmation message.</p></td></tr><tr><td class="td"><p>sns:ConfirmSubscription</p></td><td class="td"><p>Verifies an endpoint owner's intent to receive messages by validating the token sent to the endpoint by an earlier Subscribe action.</p></td></tr><tr><td class="td"><p>sns:SetTopicAttributes</p></td><td class="td"><p>Allows a topic owner to set an attribute of the topic to a new value.</p></td></tr><tr><td class="td"><p>sns:CreateTopic</p></td><td class="td"><p>Creates a topic to which notifications can be published.</p></td></tr><tr><td class="td"><p>sns:DeleteTopic</p></td><td class="td"><p>Deletes a topic and all its subscriptions.</p></td></tr><tr><td class="td"><p>sns:GetTopicAttributes</p></td><td class="td"><p>Returns all the properties of a topic.</p></td></tr><tr><td class="td"><p>events:DescribeRule</p></td><td class="td"><p>Describes the details of the specified rule.</p></td></tr><tr><td class="td"><p>events:ListRules</p></td><td class="td"><p>Lists the Amazon CloudWatch Events rules.</p></td></tr><tr><td class="td"><p>events:PutEvents</p></td><td class="td"><p>Sends custom events to Amazon CloudWatch Events so that they can be matched to rules.</p></td></tr><tr><td class="td"><p>events:EnableRule</p></td><td class="td"><p>Enables a rule.</p></td></tr><tr><td class="td"><p>events:PutRule</p></td><td class="td"><p>Creates or updates a rule.</p></td></tr><tr><td class="td"><p>events:PutTargets</p></td><td class="td"><p>Adds targets to a rule.</p></td></tr><tr><td class="td"><p>events:RemoveTargets</p></td><td class="td"><p>Removes targets from a rule so that when the rule is triggered, those targets will no longer be invoked.</p></td></tr><tr><td class="td"><p>events:DeleteRule</p></td><td class="td"><p>Deletes a rule.</p></td></tr><tr><td class="td"><p>sns:ListTopics</p></td><td class="td"><p>Returns a list of the requester's topics.</p></td></tr><tr><td class="td"><p>cloudformation:CreateStack</p></td><td class="td"><p>Creates a stack as specified in the template.</p></td></tr><tr><td class="td"><p>cloudformation:UpdateStack</p></td><td class="td"><p>Updates a stack as specified in the template.</p></td></tr><tr><td class="td"><p>cloudformation:DeleteStack</p></td><td class="td"><p>Deletes a specified stack.</p></td></tr></tbody></table></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The <span class="bold bold"><strong>NetskopeStack</strong></span> is managed by Netskope and must not be manually updated.</p></div><p>When Security Assessment scan is enabled, Netskope assumes an IAM role which enables Netskope to scan for all the resources in your AWS environment. In this case, the CFT <span class="bold bold"><strong>aws-instance-setup.yml</strong></span> requires the following permissions to scan for resources.</p><div class="informaltable table-responsive"><table class="informaltable table-bordered"><thead><tr><th class="th" data-priority="1"><p>AWS Permissions for Security Assessment</p></th><th class="th" data-priority="1"><p>Purpose</p></th></tr></thead><tbody><tr><td class="td"><p>s3:ListBucket</p></td><td class="td"><p>Lists a specific bucket.</p></td></tr><tr><td class="td"><p>ses:ListIdentityPolicies</p></td><td class="td"><p>Returns a list of sending authorization policies that are attached to the given identity (an email address or a domain).</p></td></tr><tr><td class="td"><p>s3:GetBucketAcl</p></td><td class="td"><p>This implementation of the GET operation uses the acl subresource to return the access control list (ACL) of a bucket.</p></td></tr><tr><td class="td"><p>s3:GetBucketLocation</p></td><td class="td"><p>This implementation of the GET operation uses the location subresource to return a bucket's region.</p></td></tr><tr><td class="td"><p>s3:ListAllMyBuckets</p></td><td class="td"><p>This implementation of the GET operation returns a list of all buckets owned by the authenticated sender of the request.</p></td></tr><tr><td class="td"><p>dynamodb:ListTagsOfResource</p></td><td class="td"><p>Lists all tags on an Amazon DynamoDB resource.</p></td></tr><tr><td class="td"><p>sqs:ListDeadLetterSourceQueues</p></td><td class="td"><p>Returns a list of your queues that have the RedrivePolicy queue attribute configured with a dead letter queue.</p></td></tr><tr><td class="td"><p>sqs:GetQueueUrl</p></td><td class="td"><p>Returns a list of your queues.</p></td></tr><tr><td class="td"><p>sqs:GetQueueAttributes</p></td><td class="td"><p>Gets attributes for the specified queue.</p></td></tr><tr><td class="td"><p>lambda:Get*</p></td><td class="td"><p>Returns the specified alias information such as the alias ARN, description, and function version that the Lambda function is pointing to. Also returns the configuration information of the Lambda function and a presigned URL link.</p></td></tr><tr><td class="td"><p>lambda:List*</p></td><td class="td"><p>Returns list of aliases created for a Lambda function.</p><p>Returns a list of your Lambda functions.</p><p>Lists all versions of a function.</p></td></tr><tr><td class="td"><p>cloudwatch:GetMetricStatistics</p></td><td class="td"><p>Gets statistics for the specified metric.</p></td></tr></tbody></table></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-a2c824c8-ae71-c6a4-9f9c-00b8f6db4bb4">Step 2/2: Permissions</a></li><li><a href="#UUID-a2c824c8-ae71-c6a4-9f9c-00b8f6db4bb4_section-idm4616737387249631610336552066">What happens in the process?</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Step%202/2:%20Permissions%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Step%202/2:%20Permissions%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="step-1-2--accounts---services.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="scanning-s3-buckets-encrypted-with-kms-keys.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">July 22, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
