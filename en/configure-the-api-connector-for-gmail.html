<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure the API Connector for Gmail</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="api-enabled-protection-overview-120296.html" title="API-enabled Protection Overview"></link><link rel="next" href="create-an-api-enabled-protection-policy-118926.html" title="Create an API-enabled Protection Policy"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=256425220"></script><script type="text/javascript">var propertyid = '256425220';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="api-enabled-protection.html"><span class="phrase">API-enabled Protection</span></a></li><li class="breadcrumb-link"><a href="api-enabled-protection-for-gmail.html"><span class="phrase">API-enabled Protection</span> for Gmail</a></li><li class="breadcrumb-node">Configure the API Connector for Gmail</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="api-enabled-protection-overview-120296.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="create-an-api-enabled-protection-policy-118926.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-24d49b69-f2c2-8ca9-4eb5-38b0bc95761d" data-permalink="configure-the-api-connector-for-gmail.html" data-topic-level="1" data-relative-prefix="" data-time-modified="June 20, 2019" data-publication-date="" id="UUID-c92d2bbf-19ef-de7f-eaa5-2cd3d1654996"><div class="titlepage"><div><div class="title"><h5 class="title">Configure the API Connector for Gmail</h5></div></div></div><p>To use <span class="phrase"></span><span class="phrase">API-enabled Protection</span> with Gmail, first you need to connect Netskope to your Gmail app with APIs. The following sections explain how the API connectors work and how to configure the connection.</p><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d25e2856-8fd8-6519-b4e0-0e8d6a549880" data-time-modified="February 13, 2020" data-publication-date="" id="UUID-d6adbe6a-e900-baba-e4d3-a375c9c0be5b"><div class="titlepage"><div><div class="title"><h6 class="title"><span class="phrase">API-enabled Protection</span> API Connectors</h6></div></div></div><p>Netskope <span class="phrase">API-enabled Protection</span> works by directly connecting to the cloud app using the APIs published by the app, and uses OAuth to gain delegated access to the app.</p><p>Netskope's <span class="phrase">API-enabled Protection</span> provides a complementary deployment model to provide cloud visibility, policy, and data security services by directly connecting to the cloud service using the APIs published by the cloud services. The API Connector works in conjunction with the Netskope cloud proxy to provide defense-in-depth security services. The API Connector is only available for data security related services such as DLP, Active Encryption, and Active Permissions Management.</p><div class="informalfigure"><div class="mediaobject image-left" style="text-align:left;"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:450px;
                            "><tr style="height: 270px"><td style="padding:0;text-align:left;
                                        "><img src="image/uuid-ae7c1a52-4421-75da-bd22-c4680067233d-en.png" style="max-width: 450px; max-height: 270px; " alt="HowIntrospectionWorks.png"></img></td></tr></table></div></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-5c89b9af-33e1-e56c-e0db-585d3651aa4b" data-time-modified="January 19, 2021" data-publication-date="" id="UUID-79f190db-f308-819f-609e-5c28fd4149be"><div class="titlepage"><div><div class="title"><h6 class="title">Configure Gmail for <span class="phrase">API-enabled Protection</span></h6></div></div></div><div dir="ltr" class="note" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_note-idm43202884864590"><h3 class="title">Note</h3><p><span class="phrase">API-enabled Protection</span> supports all editions of Google workspace i.e., basic, business, and enterprise. However, with basic edition, shared drives and Google Drive audit activities are not supported.</p></div><p>Starting release 50, <span class="phrase">API-enabled Protection</span> supports Gmail, Google's email service. The Gmail API allows authorized access to a user's mailbox to perform the following actions:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Read and send messages</p></li><li class="listitem"><p>Manage labels applied to messages and threads</p></li><li class="listitem"><p>Search specific messages and threads</p></li><li class="listitem"><p>Modify mailbox settings for email forwarding, filters, vacation auto-response, and more</p></li></ul></div><p>The following capabilities are supported:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Identify users belonging to the customer domain and sub-domain, if any</p></li><li class="listitem"><p>Monitor email activity of users in customer organization</p></li><li class="listitem"><p>Scan sent and trash folders for sensitive content in the subject or body </p></li><li class="listitem"><p>Scan email attachments for sensitive content</p></li><li class="listitem"><p>Alert administrator in case of suspicious activity based on triggered policies</p></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p><span class="phrase">API-enabled Protection</span> policy for Gmail supports the (ongoing) Alert policy action only. In other words, if there is a violation, <span class="phrase">API-enabled Protection</span> will generate an alert and if configured, notify the user about a policy violation.</p></div><p>An authenticated user must authorize all requests to the Gmail API. Gmail uses the OAuth 2.0 protocol for authenticating a Google account and authorizing access to user data.</p><p>There are two parts to this procedure:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Install Netskope for Google Apps from Google Marketplace</p></li><li class="listitem"><p>Configure Gmail instance in Netskope UI</p></li></ul></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp163809"><div class="titlepage"><div><div class="title"><h6 class="title">Install Netskope for Google Apps from Google Marketplace</h6></div></div></div><p>The administrator should install the Netskope app for <span class="phrase">API-enabled Protection</span> with domain-wide delegation to allow access to all users in the organization. The following scopes are required for Gmail access. The scopes are included as part of the the Netskope app.</p><div class="informaltable table-responsive"><table class="informaltable frame-box rules-all"><thead><tr><th class="th" data-priority="1"><p>Scope URL</p></th><th class="th" data-priority="1"><p>Usage</p></th></tr></thead><tbody><tr><td class="td"><p>https://www.googleapis.com/auth/admin.directory.domain.readonly</p></td><td class="td"><p>List all sub-domains in the organization</p></td></tr><tr><td class="td"><p>https://www.googleapis.com/auth/admin.directory.user.readonly</p></td><td class="td"><p>List users in each sub-domain</p></td></tr><tr><td class="td"><p>https://www.googleapis.com/auth/gmail.readonly</p></td><td class="td"><p>Read all resources and their metadata (no write operations)</p></td></tr></tbody></table></div><p>To install the Netskope for Google Apps from Google Marketplace:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Access this URL: <a class="link" href="https://workspace.google.com/marketplace/app/netskope/1055677045599" target="_blank" rel="noopener"> https://workspace.google.com/marketplace/app/netskope/1055677045599</a>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Install</strong></span>.</p></li><li class="listitem"><p>Log in using the admin username and password.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Install</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Domain wide install</strong></span> pop-up window, click <span class="bold bold"><strong>CONTINUE</strong></span>.</p></li><li class="listitem"><p>The following pop-up window is displayed. For the <span class="bold bold"><strong>Turn ON for</strong></span> drop-down menu, ensure that you select the primary domain. This ensures that the app is installed for the entire organization. Select the <span class="bold bold"><strong>Terms of Service</strong></span> check box. Click <span class="bold bold"><strong>Accept</strong></span>.</p><div class="mediaobject"><img src="image/uuid-08ba23f5-511d-c9b0-7b38-28cf379db640-en.png" style="" alt="Google_Netskope_App_ToS.png"></img></div></li></ol></div><p>On successful installation of the app, the <span class="bold bold"><strong>Netskope has been installed!</strong></span> message is displayed. The Netskope app installation is now complete.</p><p>Once the app is installed, ensure the following items:</p><div class="itemizedlist" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_itemizedlist-idm43184767485234"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Netskope app is turned on for the entire organization. Log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a>. In the home page, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace Marketplace apps</strong></span>. Look for the Netskope app and ensure that the <span class="bold bold"><strong>Distribution</strong></span> is set to <span class="bold bold"><strong>On for everyone</strong></span>.</p></li><li class="listitem"><p>The appropriate scopes are granted. You can check the scopes by logging into<a class="link" href="https://admin.google.com" target="_blank" rel="noopener"> admin.google.com</a> and on the home page, navigate to <span class="bold bold"><strong>Apps &gt; Google Workspace Marketplace apps</strong></span>. Look for the Netskope app and click it. The scopes are as follows:</p><div class="informaltable table-responsive" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_informaltable-idm43200309293098"><table class="informaltable frame-box rules-all"><colgroup><col style="width:25%;"></col><col style="width:35%;"></col><col style="width:40%;"></col></colgroup><thead><tr><th class="th" data-priority="1"><p>Scope Name</p></th><th class="th" data-priority="1"><p>Scope URL</p></th><th class="th" data-priority="1"><p>Usage</p></th><th class="th" data-priority="1"><p>Netskope Use Case</p></th></tr></thead><tbody><tr><td class="td"><p>View customer related information</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.customer.readonly</p></td><td class="td"><p>View details (e.g., contact email, organization title etc) of customer</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View and manage the provisioning of domains for your customers</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.domain</p></td><td class="td"><p>Provision and delete domain aliases for your customers Provision and delete multi-domains (secondary domains) for your customers</p></td><td class="td"><p>Read all managed domains used in user listing, calculating exposure of the shared file.</p></td></tr><tr><td class="td"><p>View groups on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.group.readonly</p></td><td class="td"><p>View details (e.g., name, members) and metadata (e.g., login details) of groups on your domain</p></td><td class="td"><p>If Team Drive has a group, then get active internal member of the group for doing all the API calls.</p></td></tr><tr><td class="td"><p>View organization units on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.orgunit.readonly</p></td><td class="td"><p>View metadata (e.g., name and description) of organization units</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View and manage the provisioning of users on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.user</p></td><td class="td"><p>Provision and delete users on your domain View and modify details (e.g., name, address, and phone number) and metadata (e.g., login details) of users on your domain</p></td><td class="td"><p>List all users, get details of a user.</p></td></tr><tr><td class="td"><p>Manage data access permissions for users on your domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.directory.user.security</p></td><td class="td"><p>View and manage data access permissions for users on your domain</p></td><td class="td"><p>Get details of third party apps and plugins installed by users (google app ecosystem).</p></td></tr><tr><td class="td"><p>View audit reports for your G Suite domain</p></td><td class="td"><p>https://www.googleapis.com/auth/admin.reports.audit.readonly</p></td><td class="td"><p>View audit reports of admin and user activity in your G Suite domain (e.g., password change events and document view events)</p></td><td class="td"><p>Poll audit events of Google Drive, administrator, login, mobile, and calendar. Webhooks subscription for Google Drive events of enterprise Google Suite accounts.</p></td></tr><tr><td class="td"><p>See, edit, create, and delete all your Google Drive files</p></td><td class="td"><p>https://www.googleapis.com/auth/drive</p></td><td class="td"><p>This app wants permission to access everything in your Google Drive. It will be able to do the same things you can do, including see your files , upload and download your files, delete your files, see the names and emails of people you share files with, share and stop sharing your files with others, remove people from your files, organize your drive.</p></td><td class="td"><p>Get Google Drive events like Team Drive details, file metadata, download, file sharing details etc.</p></td></tr><tr><td class="td"><p>View and modify but not delete your email</p></td><td class="td"><p>https://www.googleapis.com/auth/gmail.modify</p></td><td class="td"><p>View and modify your mail in Gmail. May move mail to Spam/Trash but not instantly delete forever Create, update, and delete labels Compose and send new email View your settings (e.g., filters and labels)</p></td><td class="td"><p>Not in use. To be deprecated.</p></td></tr><tr><td class="td"><p>View your email messages and settings</p></td><td class="td"><p>https://www.googleapis.com/auth/gmail.readonly</p></td><td class="td"><p>View your email messages Search your email messages View your settings (e.g., filters and labels)</p></td><td class="td"><p>Read email metadata, email details etc.</p></td></tr><tr><td class="td"><p>View your email address</p></td><td class="td"><p>https://www.googleapis.com/auth/userinfo.email</p></td><td class="td"><p>View the email address associated with your account</p></td><td class="td"><p>Grant the instance for Gmail, Google Drive.</p></td></tr><tr><td class="td"><p>See your personal info, including any personal info you've made publicly available</p></td><td class="td"><p>https://www.googleapis.com/auth/userinfo.profile</p></td><td class="td"><p>This app wants permission to see your full name, see your profile picture, see your gender, see your preferred languages, and see any other information you have made publicly available.</p></td><td class="td"><p>Grant the instance for Gmail, Google Drive.</p></td></tr></tbody></table></div></li></ul></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_N1521706761840"><div class="titlepage"><div><div class="title"><h6 class="title">Create a Custom Admin Role for Netskope</h6></div></div></div><p>If you do not plan to use the Google super admin account, you can create a custom admin role and assign the role to a user to grant access to <span class="phrase">API-enabled Protection</span>.</p><p>You can grant privileges/scopes for the Netskope app either using the default Google super admin role or by creating a custom admin role exclusively for the Netskope app. This section describes the steps to create a custom admin role for Netskope.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to <a class="link" href="https://admin.google.com" target="_blank" rel="noopener">admin.google.com</a>.</p></li><li class="listitem"><p>Click the triple bar on the top-left corner of the home page and navigate to <span class="bold bold"><strong>Account &gt; Admin roles</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Create new role</strong></span>.</p></li><li class="listitem"><p>Enter a name and description for the role and click <span class="bold bold"><strong>CONTINUE</strong></span>.</p></li><li class="listitem"><p>Select privileges for the role:</p><div dir="ltr" class="important" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_important-idm43199436663444"><h3 class="title">Important</h3><p>Netskope does not recommend to remove the following privileges. Any removal may result in failure of API calls and policy processing.</p></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Admin Console Privileges &gt; Users</p></li><li class="listitem"><p>Admin Console Privileges &gt; Domain Settings</p></li><li class="listitem"><p>Admin Console Privileges &gt; Services &gt; Gmail &gt; Settings</p></li><li class="listitem"><p>Admin Console Privileges &gt; Services &gt; Gmail &gt; Email log search</p></li><li class="listitem"><p>Admin Console Privileges &gt; Services &gt; Directory &gt; Settings</p></li></ol></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>CONTINUE</strong></span>, and then click <span class="bold bold"><strong>CREATE ROLE</strong></span>.</p></li></ol></div><p>Once you have created the custom role, you can assign the role to a user. The user can then authorize Netskope to grant access to your Gmail instance. </p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idp164040"><div class="titlepage"><div><div class="title"><h6 class="title">Configure Gmail Instance in Netskope UI</h6></div></div></div><p>To authorize Netskope to access your Gmail instance:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to the Netskope tenant UI: <code class="literal">https://<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> and go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">API-enabled Protection</span> &gt; SaaS</strong></span>.</p></li><li class="listitem"><p>Select the <span class="bold bold"><strong>Gmail</strong></span> icon, and then click <span class="bold bold"><strong>Setup Instance</strong></span>.</p><p>The <span class="bold bold"><strong>Setup Instance</strong></span> window opens.</p></li><li class="listitem" id="UUID-79f190db-f308-819f-609e-5c28fd4149be_EnterDomain"><p>In the <span class="bold bold"><strong>INSTANCE NAME</strong></span>, enter the domain name for your Gmail account.</p></li><li class="listitem"><p>In <span class="bold bold"><strong>INSTANCE TYPE</strong></span>, keep the <span class="bold bold"><strong><span class="phrase">API-enabled Protection</span></strong></span> check box selected.</p></li><li class="listitem"><p>In <span class="bold bold"><strong>GOOGLE DIRECTORY ADMIN EMAIL</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-the-api-connector-for-gmail.html#UUID-79f190db-f308-819f-609e-5c28fd4149be_N1521706761840" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following APIs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>List users in each sub-domain: <code class="literal">https://www.googleapis.com/auth/admin.directory.user</code></p></li><li class="listitem"><p>List all sub-domains in the organization: <code class="literal">https://www.googleapis.com/auth/admin.directory.domain</code></p></li></ul></div></li><li class="listitem"><p>In <span class="bold bold"><strong>GOOGLE MAIL ADMIN EMAIL</strong></span>, enter the email address of the super admin or a user with custom role (see <a class="xref" href="configure-the-api-connector-for-gmail.html#UUID-79f190db-f308-819f-609e-5c28fd4149be_N1521706761840" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>). The email address should have full access privileges to the following API:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Read all resources and their metadata (no write operations): <code class="literal">https://www.googleapis.com/auth/gmail.readonly</code></p></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If different email addresses are specified for each email address field, ensure that each email address has the appropriate privileges. To know more about the privileges, see <a class="xref" href="configure-the-api-connector-for-gmail.html#UUID-79f190db-f308-819f-609e-5c28fd4149be_N1521706761840" title="Create a Custom Admin Role for Netskope"><span class="xreftitle">Create a Custom Admin Role for Netskope</span></a>.</p></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save</strong></span>, then click <span class="bold bold"><strong>Grant Access</strong></span> for the app instance you just created. You will be prompted to log in using a super admin or user with custom role and password, and then click <span class="bold bold"><strong>Grant</strong></span>. When the configuration results page open, click <span class="bold bold"><strong> Close</strong></span>.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If different email addresses are specified for each email address field, only the Google Directory API email address can grant access.</p></div></li></ol></div><p>Refresh your browser and you will see a green check icon next instance name.</p><p>The list of internal users associated with your Gmail domain appear once the connection is established between the Netskope API connector and the Gmail API for your domain. Features such as summary, external user, and email listings are not populated in real-time. They are populated if there are policy hits.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idp164096"><div class="titlepage"><div><div class="title"><h6 class="title">Important Points to Remember</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>While composing an email, a user uploads a file as an attachment. Gmail creates a temporary placeholder for the attachment. Post upload, Gmail sends this placeholder to the trash folder. While these messages don't appear in the Gmail UI, <span class="phrase">API-enabled Protection</span> receives and processes the notification for this event. Along with entries for valid emails, Netskope UI shows entries in the <span class="emphasis"><em>Trash</em></span> folder with nobody, subject as <span class="emphasis"><em>Attachment</em></span> and details of the uploaded file.</p></li><li class="listitem"><p>When you delete a mail from the <span class="emphasis"><em>Sent</em></span> folder, Gmail moves the mail to the <span class="emphasis"><em>Trash</em></span> folder. However, in the <span class="phrase">API-enabled Protection</span> dashboard, the mail item is displayed as part of the <span class="emphasis"><em>Sent</em></span> and <span class="emphasis"><em>Trash</em></span> folder.</p></li><li class="listitem"><p>When you attach a file using Google Drive, note the following behavior:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Insert file as a link - No DLP policy hit</p></li><li class="listitem"><p>Insert file as an attachment - DLP policy hit occurs</p></li></ul></div></li></ul></div></section></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-c92d2bbf-19ef-de7f-eaa5-2cd3d1654996">Configure the API Connector for Gmail</a></li><li><a href="#UUID-d6adbe6a-e900-baba-e4d3-a375c9c0be5b">API-enabled Protection API Connectors</a></li><li><a href="#UUID-79f190db-f308-819f-609e-5c28fd4149be">Configure Gmail for API-enabled Protection</a><ul class="nav"><li><a href="#idp163809">Install Netskope for Google Apps from Google Marketplace</a></li><li><a href="#UUID-79f190db-f308-819f-609e-5c28fd4149be_N1521706761840">Create a Custom Admin Role for Netskope</a></li><li><a href="#idp164040">Configure Gmail Instance in Netskope UI</a></li><li><a href="#idp164096">Important Points to Remember</a></li></ul></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20the%20API%20Connector%20for%20Gmail%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20the%20API%20Connector%20for%20Gmail%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="api-enabled-protection-overview-120296.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="create-an-api-enabled-protection-policy-118926.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">June 20, 2019</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
