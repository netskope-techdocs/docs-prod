<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure an Azure AD Application for Forensics</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="configure-azure-blob-storage-as-a-forensic-destination.html#UUID-edefdf09-67c5-07e7-54cc-8364b8374efa_section-idm231864109633672" title="Prerequisites"></link><link rel="next" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896" title="Step-1: Create an Azure AD Application"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript">var containerid = 'GTM-W56WJ8S';

						(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': 
						new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
						j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 
						'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); 
						})(window,document,'script','dataLayer',containerid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="netskope-public-cloud-security.html"><span class="phrase">Netskope Public Cloud Security</span></a></li><li class="breadcrumb-link"><a href="continuous-security-assessment-for-microsoft-azure.html">Continuous Security Assessment for Microsoft Azure</a></li><li class="breadcrumb-link"><a href="configure-azure-blob-storage-as-a-forensic-destination.html">Configure Azure Blob Storage as a Forensic Destination</a></li><li class="breadcrumb-node">Configure an Azure AD Application for Forensics</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-azure-blob-storage-as-a-forensic-destination.html#UUID-edefdf09-67c5-07e7-54cc-8364b8374efa_section-idm231864109633672">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-cd96b6a5-1b7a-9e94-a8d1-2849b61cffbe" data-permalink="configure-an-azure-ad-application-for-forensics.html" data-topic-level="1" data-relative-prefix="" data-time-modified="July 14, 2021" data-publication-date="" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e"><div class="titlepage"><div><div class="title"><h6 class="title">Configure an Azure AD Application for Forensics</h6></div></div></div><p>To configure Azure Blob Storage as a forensic destination, you must log in to the Azure portal as a subscription owner or global administrator and configure the following tasks:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a class="xref" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896" title="Step-1: Create an Azure AD Application"><span class="xreftitle">Step-1: Create an Azure AD Application</span></a></p></li><li class="listitem"><p><a class="xref" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb84836e8-idm45444644154800" title="Step-2: Get the Application ID and Directory ID"><span class="xreftitle">Step-2: Get the Application ID and Directory ID</span></a></p></li><li class="listitem"><p><a class="xref" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc1c76681-idm46399448767440" title="Step-3: Get the Authentication Key"><span class="xreftitle">Step-3: Get the Authentication Key</span></a></p></li><li class="listitem"><p><a class="xref" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc9b68ca2-idm45444644185600" title="Step-4: Assign a Role to the Azure AD Application"><span class="xreftitle">Step-4: Assign a Role to the Azure AD Application</span></a></p></li></ol></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896"><div class="titlepage"><div><div class="title"><h6 class="title">Step-1: Create an Azure AD Application</h6></div></div></div><p>To create an Azure AD application, follow the steps below:</p><div class="orderedlist" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_orderedlist-idm43113055913840"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to <a class="link" href="https://portal.azure.com" target="_blank" rel="noopener">portal.azure.com</a>.</p></li><li class="listitem"><p>Navigate to <span class="bold bold"><strong>All services &gt; Identity &gt; Azure Active Directory</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>App registrations</strong></span>.</p><div class="mediaobject"><img src="image/uuid-05da48c1-526c-3697-2b9a-ab7b2374612a.png" style="" alt="Azure-AD-App_App-Regis.png"></img></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>+ New registration</strong></span> and enter the following details:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p><span class="bold bold"><strong>Name</strong></span>: Enter the name of the application.</p></li><li class="listitem"><p><span class="bold bold"><strong>Supported account types</strong></span>: Keep the default selection to <span class="bold bold"><strong>Accounts in this organizational directory only</strong></span>.</p></li><li class="listitem"><p><span class="bold bold"><strong>Redirect URL (optional)</strong></span>: Leave this blank.</p></li></ol></div><div class="mediaobject"><img src="image/uuid-b0217994-a448-5584-5bde-12068ced407c.png" style="" alt="Azure_Regis-App.png"></img></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Register</strong></span>.</p></li></ol></div><p id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_para-idm43113055985206">For additional information, refer to the Microsoft Azure documentation located <a class="link" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app#register-a-new-application-using-the-azure-portal" target="_blank" rel="noopener">here</a>.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb84836e8-idm45444644154800"><div class="titlepage"><div><div class="title"><h6 class="title">Step-2: Get the Application ID and Directory ID</h6></div></div></div><p>After registering the Azure AD application, the page redirects you to the Azure AD application <span class="bold bold"><strong>Overview</strong></span> page. Note down the <span class="bold bold"><strong>Application (client) ID</strong></span> and <span class="bold bold"><strong>Directory (tenant) ID</strong></span>.</p><div class="mediaobject" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_mediaobject-idm43113056236606"><img src="image/uuid-8ed962c4-4920-d312-8457-bdb7391c56c1.png" style="" alt="Azure_App-ID_Dir-ID.png"></img></div><div dir="ltr" class="note" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_note-idm43113056290206"><h3 class="title">Note</h3><p>These values will be required when you set up the Azure application instance in the Netskope UI.</p></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc1c76681-idm46399448767440"><div class="titlepage"><div><div class="title"><h6 class="title">Step-3: Get the Authentication Key</h6></div></div></div><p>To get the authentication key, follow the steps below:</p><div class="orderedlist" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_orderedlist-idm43113056422296"><ol class="orderedlist" type="1"><li class="listitem"><p>On the left navigation bar of the Azure AD application page, click <span class="bold bold"><strong>Certificates &amp; secrets</strong></span>.</p></li><li class="listitem"><p>Under <span class="bold bold"><strong>Client secrets</strong></span>, click <span class="bold bold"><strong>+ New client secret</strong></span> and enter the following details:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p><span class="bold bold"><strong>Description</strong></span>: Provide a description of the key.</p></li><li class="listitem"><p><span class="bold bold"><strong>Expires</strong></span>: Set a duration for the key.</p></li></ol></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Add</strong></span>.</p><div class="mediaobject"><img src="image/uuid-fee6d689-83ec-0442-a8f8-15e47f3b0263.png" style="" alt="Azure_Setup-Auth-Key.png"></img></div></li><li class="listitem"><p>After you save the configuration changes, under <span class="bold bold"><strong>Client secrets</strong></span>, the right-most column contains the authentication key. Copy the key value.</p><div class="mediaobject"><img src="image/uuid-0ef58e1d-8625-a958-bd8b-f7260a2e08d9.png" style="" alt="Azure_Copy-Key-Value.png"></img></div><div dir="ltr" class="important"><h3 class="title">Important</h3><p>Ensure that you copy the key value as it is not accessible once you leave this page. The key value will be required when you set up the Azure application instance in the Netskope UI.</p></div></li></ol></div><p id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_para-idm43113056535660">For additional information, refer to the Microsoft Azure documentation located <a class="link" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-credentials-to-your-web-application" target="_blank" rel="noopener">here</a>.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc9b68ca2-idm45444644185600"><div class="titlepage"><div><div class="title"><h6 class="title">Step-4: Assign a Role to the Azure AD Application</h6></div></div></div><p>To assign a role, follow the steps below:</p><div class="orderedlist" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_orderedlist-idm43113056654800"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to <a class="link" href="https://portal.azure.com" target="_blank" rel="noopener">portal.azure.com</a>.</p></li><li class="listitem"><p>Navigate to <span class="bold bold"><strong>All services &gt; General &gt; Subscriptions</strong></span>.</p><div class="mediaobject"><img src="image/uuid-b39af53e-da81-5022-d5e2-6bf93337fd23.png" style="" alt="Azure_All-serv_General_Subscrip.png"></img></div></li><li class="listitem"><p>On the <span class="bold bold"><strong>Subscriptions</strong></span> page, click the appropriate subscription from the list.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Access control (IAM)</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>+ Add &gt; Add role assignment</strong></span>.</p><div class="mediaobject"><img src="image/uuid-aea11a7b-5d2d-6a0c-3fd1-3e89dd8f4f78.png" style="" alt="Azure_Subscrip_Assign-Role.png"></img></div><p>If you intend Netskope to store forensic-related logs in Blob storage, under <span class="bold bold"><strong>Roles</strong></span>, assign a <span class="emphasis"><em>Storage Account Contributor</em></span> role or create a custom role with inbuilt Reader Role with the following permissions.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Microsoft.Storage/storageAccounts/blobServices/containers/write - This permission returns the result of patch blob container.</p></li><li class="listitem"><p>Microsoft.Storage/storageAccounts/listkeys/action - This permission returns the access keys for the specified storage account.</p></li><li class="listitem"><p>Microsoft.Storage/storageAccounts/blobServices/write - This permission returns the result of put blob service properties.</p></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You can limit the permissions for the subscription to a storage account after you've setup the subscription instance for forensics in your Netskope tenant. For detailed information, see <a class="xref" href="limit-permissions-for-forensics-to-azure-storage-account.html" title="Limit permissions for Forensics to Azure Storage Account"><span class="xreftitle">Limit permissions for Forensics to Azure Storage Account</span></a>.</p></div><p>The inbuilt Reader Role permission performs the following actions.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Gets an Azure subscription definition within a management group.</p></li><li class="listitem"><p>Gets information about a role definition.</p></li><li class="listitem"><p>Lists all the permissions the caller has at a given scope.</p></li><li class="listitem"><p>Gets the list of storage accounts or gets the properties for the specified storage account.</p></li><li class="listitem"><p>Gets the list of blob services.</p></li><li class="listitem"><p>Gets the list of containers.</p></li><li class="listitem"><p>Reads an eventSubscription.</p></li><li class="listitem"><p>Gets the list of regional event subscriptions.</p></li></ul></div><div dir="ltr" class="important" id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_important-idm43225876994686"><h3 class="title">Important</h3><p>If you are configuring a combination of features such as CSA, DLP, Threat Protection, and Forensics in a single instance, then you must create separate custom roles for each feature. For a combination of feature support, assign the roles based on the table below:</p><div class="informaltable table-responsive"><table class="informaltable frame-box rules-all"><thead><tr><th class="th" data-priority="1"><p>Feature/Role</p></th><th class="th" data-priority="1"><p>Reader + Custom</p></th><th class="th" data-priority="1"><p>Inbuilt Contributor</p></th><th class="th" data-priority="1"><p>Storage Account Contributor</p></th></tr></thead><tbody><tr><td class="td"><p>DLP</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Threat Protection</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Security Assessment</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Forensic</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td></tr><tr><td class="td"><p>DLP, Security Assessment</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>DLP, Forensic</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Threat Protection, Security Assessment</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Threat Protection, Forensic</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>Security Assessment, Forensic</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr><tr><td class="td"><p>DLP, Threat Protection, Security Assessment, Forensic</p></td><td class="td"><p>X</p></td><td class="td"><p>X</p></td><td class="td"></td></tr></tbody></table></div></div><p>To create a custom role,</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Create a JSON file with the following script and save the file as <span class="emphasis"><em>NetskopeForensics.json</em></span>.</p><pre class="programlisting">{
"Name": "custom-forensic-role",
"Description": "Forensics",
"Actions": 
['Microsoft.Storage/storageAccounts/blobServices/containers/write',
'Microsoft.Storage/storageAccounts/listkeys/action',
'Microsoft.Storage/storageAccounts/blobServices/write' 
],
"DataActions": [],
"NotDataActions": [],
"AssignableScopes": ["/subscriptions/&lt;customer-subscription-id&gt;"]
}</pre><p>To get the <span class="emphasis"><em>&lt;subscription-id&gt;</em></span>:</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>Navigate to <span class="bold bold"><strong>All services &gt; General &gt; Subscriptions</strong></span>.</p></li><li class="listitem"><p>Copy the subscription ID and replace the <span class="emphasis"><em>&lt;subscription-id&gt;</em></span> parameter with the copied ID.</p></li></ol></div></li><li class="listitem"><p>Next, use the Azure PowerShell. Click the Cloud Shell icon on the top-center bar of the Azure portal page.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The shell may prompt you to create and mount a storage account.</p></div></li><li class="listitem"><p>On the PowerShell top navigation, select the <span class="bold bold"><strong>Upload/Download files</strong></span> icon and then <span class="bold bold"><strong>Upload</strong></span>.</p><div class="mediaobject"><img src="image/uuid-8105af7f-e681-fcef-c6d4-b453384c1cec.png" style="" alt="Azure_PowerShell.png"></img></div></li><li class="listitem"><p>Upload the <span class="emphasis"><em>NetskoForensics.json</em></span> file. Then, on the PowerShell prompt, enter the following command:</p><pre class="programlisting">New-AzRoleDefinition -InputFile "NetskopeForensics.json"</pre><p>When you run this command, Azure creates a custom role <span class="emphasis"><em>Netskope Forensics Custom Role</em></span> with the <span class="emphasis"><em>Microsoft.Storage/storageAccounts/blobServices/containers/write</em></span> , <span class="emphasis"><em>Microsoft.Storage/storageAccounts/listkeys/action</em></span>, and <span class="emphasis"><em>Microsoft.Storage/storageAccounts/blobServices/write</em></span> permissions.</p></li><li class="listitem"><p>Under <span class="bold bold"><strong>Roles</strong></span>, assign the <span class="emphasis"><em>Reader</em></span> and <span class="emphasis"><em>Netskope Forensics Custom Role</em></span>.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If you have multiple subscriptions, you can group them under a Management Group and assign the role at the Management Group.</p></div></li><li class="listitem"><p>Keep the <span class="bold bold"><strong>Assign access to</strong></span> <span class="emphasis"><em>Azure AD user, group, or service principal</em></span>.</p></li><li class="listitem"><p>Under <span class="bold bold"><strong>Select</strong></span>, search for the newly created Azure AD application and select it.</p><div class="mediaobject"><img src="image/uuid-dac62f86-3551-54d3-9613-b11ff31a15e1.png" style="" alt="Azure_Add-Role.png"></img></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save</strong></span>.</p></li></ol></div></li></ol></div><p id="UUID-f3ae5aee-377b-505c-460e-3db523c2229e_para-idm43113056771110">For additional information, refer to the Microsoft Azure documentation located <a class="link" href="https://docs.microsoft.com/en-in/azure/active-directory/develop/howto-create-service-principal-portal#assign-the-application-to-a-role" target="_blank" rel="noopener">here</a>.</p></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-f3ae5aee-377b-505c-460e-3db523c2229e">Configure an Azure AD Application for Forensics</a></li><li><a href="#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896">Step-1: Create an Azure AD Application</a></li><li><a href="#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb84836e8-idm45444644154800">Step-2: Get the Application ID and Directory ID</a></li><li><a href="#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc1c76681-idm46399448767440">Step-3: Get the Authentication Key</a></li><li><a href="#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bc9b68ca2-idm45444644185600">Step-4: Assign a Role to the Azure AD Application</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20an%20Azure%20AD%20Application%20for%20Forensics%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20an%20Azure%20AD%20Application%20for%20Forensics%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-azure-blob-storage-as-a-forensic-destination.html#UUID-edefdf09-67c5-07e7-54cc-8364b8374efa_section-idm231864109633672">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-an-azure-ad-application-for-forensics.html#UUID-f3ae5aee-377b-505c-460e-3db523c2229e_section-5cc6bb1bb761d-idm45894348648896">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">July 14, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W56WJ8S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
